<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>HPACK - HTTP/2 のためのヘッダ圧縮</title><script>
function getMeta(rfcno, container) {

  var xhr = new XMLHttpRequest();
  xhr.open("GET", "http://tools.ietf.org/draft/rfc" + rfcno + "/state.xml", true);
  xhr.onload = function (e) {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        var doc = xhr.responseXML;
        var info = getChildByName(doc.documentElement, "info");
  
        var cont = document.getElementById(container);
        // empty the container
        while (cont.firstChild) {
          cont.removeChild(myNode.firstChild);
        }      
  
        var c = getChildByName(info, "stdstatus");
        if (c !== null) {
          var bld = newElementWithText("b", c.textContent);
          cont.appendChild(bld);
        }
  
        c = getChildByName(info, "updatedby");
        if (c !== null) {
          cont.appendChild(newElement("br"));
          cont.appendChild(newText("Updated by: "));
          appendRfcLinks(cont, c.textContent);
        }
  
        c = getChildByName(info, "obsoletedby");
        if (c !== null) {
          cont.appendChild(newElement("br"));
          cont.appendChild(newText("Obsoleted by: "));
          appendRfcLinks(cont, c.textContent);
        }
        
        c = getChildByName(info, "errata");
        if (c !== null) {
          cont.appendChild(newElement("br"));
          var link = newElementWithText("a", "errata");
          link.setAttribute("href", "http://www.rfc-editor.org/errata_search.php?rfc=" + rfcno);
          var errata = newElementWithText("i", "This document has ");
          errata.appendChild(link);
          errata.appendChild(newText("."));
          cont.appendChild(errata);
        }

        cont.style.display = "block";
      } else {
        console.error(xhr.statusText);
      }
    }
  };
  xhr.onerror = function (e) {
    console.error(xhr.status + " " + xhr.statusText);
  };
  xhr.send(null);
}

// DOM helpers
function newElement(name) {
  return document.createElement(name);
}
function newElementWithText(name, txt) {
  var e = document.createElement(name);
  e.appendChild(newText(txt));
  return e;
}
function newText(text) {
  return document.createTextNode(text);
}

function getChildByName(parent, name) {
  if (parent === null) {
    return null;
  }
  else {
    for (var c = parent.firstChild; c !== null; c = c.nextSibling) {
      if (name == c.nodeName) {
        return c;
      }
    }
    return null;
  }
}

function appendRfcLinks(parent, text) {
  var updates = text.split(",");
  for (var i = 0; i < updates.length; i++) {
    var rfc = updates[i].trim();
    if (rfc.substring(0, 3) == "rfc") {
      var link = newElement("a");
      link.setAttribute("href", "http://tools.ietf.org/html/" + rfc);
      link.appendChild(newText(rfc.substring(3)));
      parent.appendChild(link);
    } else {
      parent.appendChild(newText(rfc));
    }
    if (i != updates.length - 1) {
      parent.appendChild(newText(", "));
    }
  }
}
</script><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a.smpl {
  color: black;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  color: black;
  font-family: cambria, georgia, serif;
  font-size: 12pt;
  margin: 2em auto;
  max-width: 1000px;
}
samp, tt, code, pre {
  font-family: consolas, monaco, monospace;
}
cite {
  font-style: normal;
}
dl {
  margin-left: 2em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}
dl p {
  margin-left: 0em;
}
dt {
  margin-top: .5em;
}
h1 {
  font-size: 130%;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h2 {
  font-size: 120%;
  line-height: 15pt;
  page-break-after: avoid;
}
h3 {
  font-size: 110%;
  page-break-after: avoid;
}
h4, h5, h6 {
  page-break-after: avoid;
}
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
  color: black;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
}
ol {
  margin-left: 2em;
}
ol.la {
  list-style-type: lower-alpha;
}
ol.ua {
  list-style-type: upper-alpha;
}
ol p {
  margin-left: 0em;
}
p {
  margin-left: 2em;
}
pre {
  font-size: 11pt;
  margin-left: 3em;
  background-color: lightyellow;
  padding: .25em;
  page-break-inside: avoid;
}
pre.text2 {
  border-style: dotted;
  border-width: 1px;
  background-color: #f0f0f0;
}
pre.inline {
  background-color: white;
  padding: 0em;
  page-break-inside: auto;
}
pre.text {
  border-style: dotted;
  border-width: 1px;
  background-color: #f8f8f8;
}
pre.drawing {
  border-style: solid;
  border-width: 1px;
  background-color: #f8f8f8;
  padding: 2em;
}
table {
  margin-left: 2em;
}
table.tt {
  vertical-align: top;
  border-color: gray;
}
table.tt th {
  border-color: gray;
}
table.tt td {
  border-color: gray;
}
table.all {
  border-style: solid;
  border-width: 2px;
}
table.full {
  border-style: solid;
  border-width: 2px;
}
table.tt td {
  vertical-align: top;
}
table.all td {
  border-style: solid;
  border-width: 1px;
}
table.full td {
  border-style: none solid;
  border-width: 1px;
}
table.tt th {
  vertical-align: top;
}
table.all th {
  border-style: solid;
  border-width: 1px;
}
table.full th {
  border-style: solid;
  border-width: 1px 1px 2px 1px;
}
table.headers th {
  border-style: none none solid none;
  border-width: 2px;
}
table.left {
  margin-right: auto;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
caption {
  caption-side: bottom;
  font-weight: bold;
  font-size: 10pt;
  margin-top: .5em;
}

table.header {
  border-spacing: 1px;
  width: 95%;
  font-size: 11pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap;
}
table.header td {
  background-color: gray;
  width: 50%;
}
td.reference {
  vertical-align: top;
  white-space: nowrap;
  padding-right: 1em;
}
thead {
  display:table-header-group;
}
ul.toc, ul.toc ul {
  list-style: none;
  margin-left: 1.5em;
  padding-left: 0em;
}
ul.toc li {
  line-height: 150%;
  font-weight: bold;
  margin-left: 0em;
}
ul.toc li li {
  line-height: normal;
  font-weight: normal;
  font-size: 11pt;
  margin-left: 0em;
}
li.excluded {
  font-size: 0pt;
}
ul p {
  margin-left: 0em;
}
.title, .filename, h1, h2, h3, h4 {
  font-family: candara, calibri, segoe, optima, arial, sans-serif;
}

.comment {
  background-color: yellow;
}
.center {
  text-align: center;
}
.error {
  color: red;
  font-style: italic;
  font-weight: bold;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 10pt;
}
.filename {
  color: #333333;
  font-size: 75%;
  font-weight: bold;
  line-height: 21pt;
  text-align: center;
}
.fn {
  font-weight: bold;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.title {
  color: green;
  font-size: 150%;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
  margin-top: 36pt;
}
.warning {
  font-size: 130%;
  background-color: yellow;
}

@media screen {
  pre.text, pre.text2 {
    width: 69em;
  }
}

@media print {
  .noprint {
    display: none;
  }

  a {
    color: black;
    text-decoration: none;
  }

  table.header {
    width: 90%;
  }

  td.header {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 110%;
  }

  ul.toc a:last-child::after {
    content: leader('.') target-counter(attr(href), page);
  }

  ul.ind li li a {
    content: target-counter(attr(href), page);
  }

  pre {
    font-size: 10pt;
  }

  .print2col {
    column-count: 2;
    -moz-column-count: 2;
    column-fill: auto;
  }
}

@page {
  @top-left {
       content: "RFC 7541";
  }
  @top-right {
       content: "May 2015";
  }
  @top-center {
       content: "HPACK";
  }
  @bottom-left {
       content: "Peon & Ruellan";
  }
  @bottom-center {
       content: "Standards Track";
  }
  @bottom-right {
       content: "[Page " counter(page) "]";
  }
}

@page:first {
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 はじめに" href="#rfc.section.1"><link rel="Chapter" title="2 圧縮処理の概要" href="#rfc.section.2"><link rel="Chapter" title="3 ヘッダブロックのデコード処理" href="#rfc.section.3"><link rel="Chapter" title="4 動的テーブルの管理" href="#rfc.section.4"><link rel="Chapter" title="5 Primitive Type Representations" href="#rfc.section.5"><link rel="Chapter" title="6 Binary Format" href="#rfc.section.6"><link rel="Chapter" title="7 Security Considerations" href="#rfc.section.7"><link rel="Chapter" title="8 IANA Considerations" href="#rfc.section.8"><link rel="Chapter" title="9 Acknowledgments" href="#rfc.section.9"><link rel="Chapter" href="#rfc.section.10" title="10 参考文献"><link rel="Appendix" title="A Static Table Definition" href="#rfc.section.A"><link rel="Appendix" title="B Huffman Code" href="#rfc.section.B"><link rel="Appendix" title="C Examples" href="#rfc.section.C"><link rel="Alternate" title="Authorative ASCII Version" href="http://www.ietf.org/rfc/rfc7541.txt"><link rel="Help" title="RFC-Editor's Status Page" href="http://www.rfc-editor.org/info/rfc7541"><link rel="Help" title="Additional Information on tools.ietf.org" href="http://tools.ietf.org/html/rfc7541"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.690, 2014/11/12 21:37:29, XSLT vendor: libxslt http://xmlsoft.org/XSLT/"><meta name="keywords" content="HTTP, Header"><link rel="schema.dct" href="http://purl.org/dc/terms/"><meta name="dct.creator" content="Peon, R."><meta name="dct.creator" content="Ruellan, H."><meta name="dct.identifier" content="urn:ietf:rfc:7541"><meta name="dct.issued" scheme="ISO8601" content="2015-05"><meta name="dct.abstract" content="この仕様書は HTTP/2 で使われる HTTP ヘッダフィールドを 効率的に表現する圧縮フォーマット HPACK を定義 します。"><meta name="dct.isPartOf" content="urn:issn:2070-1721"><meta name="description" content="この仕様書は HTTP/2 で使われる HTTP ヘッダフィールドを 効率的に表現する圧縮フォーマット HPACK を定義 します。"></head><body onload='getMeta(7541,"rfc.meta");'><table class="header" id="rfc.headerblock"><tbody><tr><td class="left">Internet Engineering Task Force (IETF)</td><td class="right">R. Peon</td></tr><tr><td class="left">Request for Comments: 7541</td><td class="right">Google, Inc</td></tr><tr><td class="left">Category: Standards Track</td><td class="right">H. Ruellan</td></tr><tr><td class="left">ISSN: 2070-1721</td><td class="right">Canon CRF</td></tr><tr><td class="left"></td><td class="right">May 2015</td></tr></tbody></table><p class="title" id="rfc.title">HPACK - HTTP/2 のためのヘッダ圧縮</p><h1 id="rfc.abstract"><a href="#rfc.abstract">概要</a></h1><p>この仕様書は HTTP/2 で使われる HTTP ヘッダフィールドを 効率的に表現する圧縮フォーマット HPACK を定義 します。</p><div id="rfc.meta" style="float: right; border: 1px solid black; margin: 2em; padding: 1em; display: none;"></div><div id="rfc.status"><h1><a href="#rfc.status">Status of This Memo</a></h1><p>This is an Internet Standards Track document.</p><p>This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.</p><p>Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at <a href="http://www.rfc-editor.org/info/rfc7541">http://www.rfc-editor.org/info/rfc7541</a>.</p></div><div id="rfc.copyrightnotice"><h1><a href="#rfc.copyrightnotice">Copyright Notice</a></h1><p>Copyright © 2015 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p></div><hr class="noprint"><div id="rfc.toc"><h1 class="np"><a href="#rfc.toc">目次</a></h1><ul class="toc"><li><a href="#rfc.section.1">1.</a>   <a href="#rfc.section.1">はじめに</a><ul><li><a href="#rfc.section.1.1">1.1</a>   <a href="#rfc.section.1.1">概要</a></li><li><a href="#rfc.section.1.2">1.2</a>   <a href="#conventions">表記</a></li><li><a href="#rfc.section.1.3">1.3</a>   <a href="#encoding.concepts">用語</a></li></ul></li><li><a href="#rfc.section.2">2.</a>   <a href="#header.encoding">圧縮処理の概要</a><ul><li><a href="#rfc.section.2.1">2.1</a>   <a href="#header.list.ordering">ヘッダリストの順序</a></li><li><a href="#rfc.section.2.2">2.2</a>   <a href="#encoding.context">エンコーディングとデコーディングのコンテキスト</a></li><li><a href="#rfc.section.2.3">2.3</a>   <a href="#indexing.tables">インデックステーブル</a><ul><li><a href="#rfc.section.2.3.1">2.3.1</a>   <a href="#static.table">静的テーブル</a></li><li><a href="#rfc.section.2.3.2">2.3.2</a>   <a href="#dynamic.table">動的テーブル</a></li><li><a href="#rfc.section.2.3.3">2.3.3</a>   <a href="#index.address.space">インデックスアドレス空間</a></li></ul></li><li><a href="#rfc.section.2.4">2.4</a>   <a href="#header.representation">ヘッダフィールド表現</a></li></ul></li><li><a href="#rfc.section.3">3.</a>   <a href="#header.block.decoding">ヘッダブロックのデコード処理</a><ul><li><a href="#rfc.section.3.1">3.1</a>   <a href="#header.block.processing">ヘッダブロック処理</a></li><li><a href="#rfc.section.3.2">3.2</a>   <a href="#header.representation.processing">ヘッダフィールド表現の処理</a></li></ul></li><li><a href="#rfc.section.4">4.</a>   <a href="#dynamic.table.management">動的テーブルの管理</a><ul><li><a href="#rfc.section.4.1">4.1</a>   <a href="#calculating.table.size">テーブルサイズの計算</a></li><li><a href="#rfc.section.4.2">4.2</a>   <a href="#maximum.table.size">最大テーブルサイズ</a></li><li><a href="#rfc.section.4.3">4.3</a>   <a href="#entry.eviction">動的テーブルサイズ変更時のエントリの削除</a></li><li><a href="#rfc.section.4.4">4.4</a>   <a href="#entry.addition">新しいエントリ追加時のエントリの削除</a></li></ul></li><li><a href="#rfc.section.5">5.</a>   <a href="#low-level.representation">Primitive Type Representations</a><ul><li><a href="#rfc.section.5.1">5.1</a>   <a href="#integer.representation">Integer Representation</a></li><li><a href="#rfc.section.5.2">5.2</a>   <a href="#string.literal.representation">String Literal Representation</a></li></ul></li><li><a href="#rfc.section.6">6.</a>   <a href="#detailed.format">Binary Format</a><ul><li><a href="#rfc.section.6.1">6.1</a>   <a href="#indexed.header.representation">Indexed Header Field Representation</a></li><li><a href="#rfc.section.6.2">6.2</a>   <a href="#literal.header.representation">Literal Header Field Representation</a><ul><li><a href="#rfc.section.6.2.1">6.2.1</a>   <a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></li><li><a href="#rfc.section.6.2.2">6.2.2</a>   <a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></li><li><a href="#rfc.section.6.2.3">6.2.3</a>   <a href="#literal.header.never.indexed">Literal Header Field never Indexed</a></li></ul></li><li><a href="#rfc.section.6.3">6.3</a>   <a href="#encoding.context.update">Dynamic Table Size Update</a></li></ul></li><li><a href="#rfc.section.7">7.</a>   <a href="#Security">Security Considerations</a><ul><li><a href="#rfc.section.7.1">7.1</a>   <a href="#compression.based.attacks">Probing Dynamic Table State</a><ul><li><a href="#rfc.section.7.1.1">7.1.1</a>   <a href="#rfc.section.7.1.1">Applicability to HPACK and HTTP</a></li><li><a href="#rfc.section.7.1.2">7.1.2</a>   <a href="#rfc.section.7.1.2">Mitigation</a></li><li><a href="#rfc.section.7.1.3">7.1.3</a>   <a href="#never.indexed.literals">Never Indexed Literals</a></li></ul></li><li><a href="#rfc.section.7.2">7.2</a>   <a href="#rfc.section.7.2">Static Huffman Encoding</a></li><li><a href="#rfc.section.7.3">7.3</a>   <a href="#rfc.section.7.3">Memory Consumption</a></li><li><a href="#rfc.section.7.4">7.4</a>   <a href="#rfc.section.7.4">Implementation Limits</a></li></ul></li><li><a href="#rfc.section.8">8.</a>   <a href="#rfc.section.8">IANA Considerations</a></li><li><a href="#rfc.section.9">9.</a>   <a href="#rfc.section.9">Acknowledgments</a></li><li><a href="#rfc.section.10">10.</a>   <a href="#rfc.references">参考文献</a><ul><li><a href="#rfc.section.10.1">10.1</a>   <a href="#rfc.references.1">Normative References</a></li><li><a href="#rfc.section.10.2">10.2</a>   <a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.section.A">A.</a>   <a href="#static.table.definition">Static Table Definition</a></li><li><a href="#rfc.section.B">B.</a>   <a href="#huffman.code">Huffman Code</a></li><li><a href="#rfc.section.C">C.</a>   <a href="#examples">Examples</a><ul><li><a href="#rfc.section.C.1">C.1</a>   <a href="#integer.representation.examples">Integer Representation Examples</a><ul><li><a href="#rfc.section.C.1.1">C.1.1</a>   <a href="#integer.representation.example1">Example 1: Encoding 10 Using a 5-bit Prefix</a></li><li><a href="#rfc.section.C.1.2">C.1.2</a>   <a href="#integer.representation.example2">Example 2: Encoding 1337 Using a 5-bit Prefix</a></li><li><a href="#rfc.section.C.1.3">C.1.3</a>   <a href="#integer.representation.example3">Example 3: Encoding 42 Starting at an Octet Boundary</a></li></ul></li><li><a href="#rfc.section.C.2">C.2</a>   <a href="#header.field.representation.examples">Header Field Representation Examples</a><ul><li><a href="#rfc.section.C.2.1">C.2.1</a>   <a href="#rfc.section.C.2.1">Literal Header Field with Indexing</a></li><li><a href="#rfc.section.C.2.2">C.2.2</a>   <a href="#rfc.section.C.2.2">Literal Header Field without Indexing</a></li><li><a href="#rfc.section.C.2.3">C.2.3</a>   <a href="#rfc.section.C.2.3">Literal Header Field never Indexed</a></li><li><a href="#rfc.section.C.2.4">C.2.4</a>   <a href="#rfc.section.C.2.4">Indexed Header Field</a></li></ul></li><li><a href="#rfc.section.C.3">C.3</a>   <a href="#request.examples.without.huffman.coding">Request Examples without Huffman Coding</a><ul><li><a href="#rfc.section.C.3.1">C.3.1</a>   <a href="#rfc.section.C.3.1">First Request</a></li><li><a href="#rfc.section.C.3.2">C.3.2</a>   <a href="#rfc.section.C.3.2">Second Request</a></li><li><a href="#rfc.section.C.3.3">C.3.3</a>   <a href="#rfc.section.C.3.3">Third Request</a></li></ul></li><li><a href="#rfc.section.C.4">C.4</a>   <a href="#request.examples.with.huffman.coding">Request Examples with Huffman Coding</a><ul><li><a href="#rfc.section.C.4.1">C.4.1</a>   <a href="#rfc.section.C.4.1">First Request</a></li><li><a href="#rfc.section.C.4.2">C.4.2</a>   <a href="#rfc.section.C.4.2">Second Request</a></li><li><a href="#rfc.section.C.4.3">C.4.3</a>   <a href="#rfc.section.C.4.3">Third Request</a></li></ul></li><li><a href="#rfc.section.C.5">C.5</a>   <a href="#response.examples.without.huffman.coding">Response Examples without Huffman Coding</a><ul><li><a href="#rfc.section.C.5.1">C.5.1</a>   <a href="#rfc.section.C.5.1">First Response</a></li><li><a href="#rfc.section.C.5.2">C.5.2</a>   <a href="#rfc.section.C.5.2">Second Response</a></li><li><a href="#rfc.section.C.5.3">C.5.3</a>   <a href="#rfc.section.C.5.3">Third Response</a></li></ul></li><li><a href="#rfc.section.C.6">C.6</a>   <a href="#response.examples.with.huffman.coding">Response Examples with Huffman Coding</a><ul><li><a href="#rfc.section.C.6.1">C.6.1</a>   <a href="#rfc.section.C.6.1">First Response</a></li><li><a href="#rfc.section.C.6.2">C.6.2</a>   <a href="#rfc.section.C.6.2">Second Response</a></li><li><a href="#rfc.section.C.6.3">C.6.3</a>   <a href="#rfc.section.C.6.3">Third Response</a></li></ul></li></ul></li><li><a href="#rfc.authors">Authors' Addresses</a></li></ul></div><ul class="toc"><li>Figures
        <ul><li><a href="#rfc.figure.1">Figure 1: インデックスアドレス空間</a></li><li><a href="#rfc.figure.2">Figure 2: Integer Value Encoded within the Prefix (shown for N = 5)</a></li><li><a href="#rfc.figure.3">Figure 3: Integer Value Encoded after the Prefix (shown for N = 5)</a></li><li><a href="#rfc.figure.4">Figure 4: String Literal Representation</a></li><li><a href="#rfc.figure.5">Figure 5: Indexed Header Field</a></li><li><a href="#rfc.figure.6">Figure 6: Literal Header Field with Incremental Indexing - Indexed Name</a></li><li><a href="#rfc.figure.7">Figure 7: Literal Header Field with Incremental Indexing - New Name</a></li><li><a href="#rfc.figure.8">Figure 8: Literal Header Field without Indexing - Indexed Name</a></li><li><a href="#rfc.figure.9">Figure 9: Literal Header Field without Indexing - New Name</a></li><li><a href="#rfc.figure.10">Figure 10: Literal Header Field never Indexed - Indexed Name</a></li><li><a href="#rfc.figure.11">Figure 11: Literal Header Field never Indexed - New Name</a></li><li><a href="#rfc.figure.12">Figure 12: Maximum Dynamic Table Size Change</a></li></ul></li></ul><div><h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a> はじめに</h1><div id="rfc.section.1.p.1"><p>HTTP/1.1 (<a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a> を参照) において、 ヘッダフィールドは圧縮されません。 Web ページは 12 から数百の リクエストを含むようになってきており、これらのリクエストの中の 余分なヘッダフィールドは不必要に帯域を消費し、レイテンシを 大きく増加します。</p></div><div id="rfc.section.1.p.2"><p><a href="#SPDY">SPDY</a> <cite title="SPDY Protocol">[SPDY]</cite> は最初、余分なヘッダフィールド を効率的に表現することで非常に効率的にする <a href="#DEFLATE">DEFLATE</a> <cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite> フォーマットを使用して ヘッダフィールドを圧縮することによりこの無駄に取り組みました。 しかしながら、このアプローチは CRIME 攻撃で実証された通り セキュリティリスクがあります。 (<a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a>を参照)</p></div><div id="rfc.section.1.p.3"><p>この仕様書は余分なヘッダフィールドを消去し、既知のセキュリティ 攻撃への脆弱性を抑制し、そして制限された環境で使用する 制限されたメモリ要求を持つヘッダフィールドの新しい圧縮方式 HPACK を定義します。 HPACK の潜在的なセキュリティへの懸念は <a href="#Security" title="Security Considerations">Section 7</a> に記述します。</p></div><div id="rfc.section.1.p.4"><p>HPACK のフォーマットは意図的にシンプルで柔軟性を欠かせています。 この二つの特徴によって実装の誤りによる相互運用性とセキュリティ イシューのリスクを減らします。拡張メカニズムは定義されて いません。フォーマットの変更は完全な代替仕様の定義によって のみ成り立ちます。</p></div><div><h2 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1</a> 概要</h2><div id="rfc.section.1.1.p.1"><p>この仕様で定義されるフォーマットはヘッダフィールドのリストを 重複可能な名前と値のペアの順序付けられたコレクションとして扱います。 名前と値は不透明なオクテットの並びになることを考慮し、ヘッダ フィールドの順序は圧縮と展開の後で保存されます。</p></div><div id="rfc.section.1.1.p.2"><p>エンコーディングはヘッダフィールドとインデックスされた値を マップするヘッダフィールドテーブルによって決まります。これらの ヘッダフィールドテーブルは、新しいフィールドをエンコードもしくは デコードする時に増分更新を行えます。</p></div><div id="rfc.section.1.1.p.3"><p>エンコードされた形式内で、ヘッダフィールドはリテラルもしくは ヘッダフィールドテーブル内の一つのヘッダフィールドへの参照として表現 されます。従って、ヘッダフィールドのリストは参照とリテラル値を 混ぜ合わせてエンコードできます。</p></div><div id="rfc.section.1.1.p.4"><p>リテラル値は直接エンコードされるか静的なハフマン符号を 使います。</p></div><div id="rfc.section.1.1.p.5"><p>エンコーダはヘッダフィールドテーブルに新しいエントリとして挿入する ヘッダフィールドを決定する責任があります。デコーダは エンコーダによって定められたヘッダフィールドテーブルに対する修正を行い、 その処理内でヘッダフィールドのリストを再構築します。 これによりデコーダをシンプル化し、非常に様々なエンコーダと 相互運用可能にすることができます。</p></div><div id="rfc.section.1.1.p.6"><p>ヘッダフィールドを表現するためのこれらの異なったメカニズムの使用 を解説する例は <a href="#examples" title="Examples">Appendix C</a> にあります。</p></div></div><div id="conventions"><h2 id="rfc.section.1.2"><a href="#rfc.section.1.2">1.2</a> <a href="#conventions">表記</a></h2><div id="rfc.section.1.2.p.1"><p>この文書のキーワード "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", そして "OPTIONAL" は <a href="#RFC2119">RFC 2119</a> <cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite> に記述された通りに解釈されます。</p></div><div id="rfc.section.1.2.p.2"><p>全ての数値はネットワークバイトオーダーです。特に断りが 無い限り値は符号なしです。リテラルの値は必要に応じて 10 進数または 16 進数で与えられます。</p></div></div><div id="encoding.concepts"><h2 id="rfc.section.1.3"><a href="#rfc.section.1.3">1.3</a> <a href="#encoding.concepts">用語</a></h2><div id="rfc.section.1.3.p.1"><p>この仕様は下記の用語を使用します: </p><dl><dt>ヘッダフィールド:</dt><dd>名前と値のペア。名前と値どちらも不定なオクテットの 連続として扱われます。</dd><dt>動的テーブル:</dt><dd>動的テーブル (<a href="#dynamic.table" title="動的テーブル">Section 2.3.2</a> を参照) は保存されたヘッダフィールドとインデックス 値を関連付けるのに使用されるテーブルです。 このテーブルは動的でエンコーディングやデコーディング のコンテキスト特有です。</dd><dt>静的テーブル:</dt><dd>静的テーブル(<a href="#static.table" title="静的テーブル">Section 2.3.1</a> を参照) は頻繁に使われるヘッダフィールドとインデックス値を静的に 関連づけるテーブルです。このテーブルは順序付けられ、 リードオンリーであり、常にアクセス可能で、すべての エンコーディングやデコーディングのコンテキストの間で共有される 可能性があります。</dd><dt>ヘッダリスト:</dt><dd>ヘッダリストは一緒にエンコードされるヘッダ フィールドの順序付けられたコレクションであり、重複した ヘッダフィールドを含むことができます。 HTTP/2 ヘッダブロックに含まれるヘッダフィールドの 完全なリストがヘッダリストです。</dd><dt>ヘッダフィールド表現:</dt><dd>ヘッダフィールドはリテラルかインデックスの どちらかのエンコードされた形式で表現できます。 (<a href="#header.representation" title="ヘッダフィールド表現">Section 2.4</a> を参照)</dd><dt>ヘッダブロック:</dt><dd>デコード時に完全なヘッダリストを提供する ヘッダフィールド表現の順序付けられたリストです。</dd></dl></div></div></div><div id="header.encoding"><h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#header.encoding">圧縮処理の概要</a></h1><div id="rfc.section.2.p.1"><p>この仕様ではエンコーダの為の特定のアルゴリズムについては記述 しません。代わりに、デコーダがどう処理することが期待され、 この定義で許されるエンコーディングを行う為にエンコーダに許される ことを正確に定義します。</p></div><div id="header.list.ordering"><h2 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1</a> <a href="#header.list.ordering">ヘッダリストの順序</a></h2><div id="rfc.section.2.1.p.1"><p>HPACK はヘッダリスト内のヘッダフィールドの順序を保存します。 エンコーダはオリジナルのヘッダリスト内の順序に従ってヘッダ ブロックのヘッダフィールド表現を順序付けなければなりません (MUST) 。 デコーダはヘッダブロック内の順序によってデコードされたヘッダ リストのヘッダフィールドを順序付けなければなりません (MUST) 。</p></div></div><div id="encoding.context"><h2 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2</a> <a href="#encoding.context">エンコーディングとデコーディングのコンテキスト</a></h2><div id="rfc.section.2.2.p.1"><p>ヘッダブロックを展開するため、デコーダはデコーディング コンテキストとして動的テーブル (<a href="#dynamic.table" title="動的テーブル">Section 2.3.2</a> を参照) の 管理のみを必要とします。他に必要な状態はありません。</p></div><div id="rfc.section.2.2.p.2"><p>HTTP のような双方向コミュニケーションに使用される際、 エンコーディングとデコーディングの動的テーブルは 完全に独立したエンドポイントによって管理されます。 例えば、リクエストとレスポンスの動的テーブルは分離されます。</p></div></div><div id="indexing.tables"><h2 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3</a> <a href="#indexing.tables">インデックステーブル</a></h2><div id="rfc.section.2.3.p.1"><p>HPACK はヘッダフィールドとインデックスを関連付ける二つの テーブルを使用します。静的テーブル (<a href="#static.table" title="静的テーブル">Section 2.3.1</a> を参照) は 予め定義されており、 (ほとんどは空の値を持った) よく使用されるヘッダフィールドを 持ちます。動的テーブル (<a href="#dynamic.table" title="動的テーブル">Section 2.3.2</a> を 参照) は動的であり、エンコーダによってエンコードされた ヘッダリスト内で繰り返し使用されるヘッダフィールドを指すのに 使用できます。</p></div><div id="rfc.section.2.3.p.2"><p>これら二つのテーブルはインデックス値の定義のため単一のアドレス 空間内で結合されます。 (<a href="#index.address.space" title="インデックスアドレス空間">Section 2.3.3</a> を参照)</p></div><div id="static.table"><h3 id="rfc.section.2.3.1"><a href="#rfc.section.2.3.1">2.3.1</a> <a href="#static.table">静的テーブル</a></h3><div id="rfc.section.2.3.1.p.1"><p>静的テーブルは予め定義されたヘッダフィールドの静的 リストで構成されます。このエントリは <a href="#static.table.definition" title="Static Table Definition">Appendix A</a> で定義 されます。</p></div></div><div id="dynamic.table"><h3 id="rfc.section.2.3.2"><a href="#rfc.section.2.3.2">2.3.2</a> <a href="#dynamic.table">動的テーブル</a></h3><div id="rfc.section.2.3.2.p.1"><p>動的テーブルは first-in, first-out 順で管理される ヘッダフィールドのリストで構成されます。動的テーブルの 最初であり最新のエントリは最小のインデックスに、最古の エントリは最大のインデックスになります。</p></div><div id="rfc.section.2.3.2.p.2"><p>動的テーブルは最初は空です。各ヘッダブロックとして追加 されるエントリは展開されています。</p></div><div id="rfc.section.2.3.2.p.3"><p>動的テーブルは重複するエントリ（例えば、同じ名前と 同じ値を持つエントリ）を持つことができます。 従って、重複したエントリはデコーダによってエラーとして 扱われてはいけません (MUST NOT) 。</p></div><div id="rfc.section.2.3.2.p.4"><p>エンコーダは動的テーブルの更新のしかたを決定するので、動的 テーブルに使用されるメモリ量を制御することができます。 デコーダのメモリ要件を制限するために、動的テーブルサイズは 厳密に束縛されます (<a href="#maximum.table.size" title="最大テーブルサイズ">Section 4.2</a> を 参照) 。</p></div><div id="rfc.section.2.3.2.p.5"><p>ヘッダフィールド表現のリストの処理中にデコーダは動的 テーブルを更新します。(<a href="#header.representation.processing" title="ヘッダフィールド表現の処理">Section 3.2</a> を参照)</p></div></div><div id="index.address.space"><h3 id="rfc.section.2.3.3"><a href="#rfc.section.2.3.3">2.3.3</a> <a href="#index.address.space">インデックスアドレス空間</a></h3><div id="rfc.section.2.3.3.p.1"><p>静的テーブルと動的テーブルは単一のインデックスアドレス 空間内で結合されます。</p></div><div id="rfc.section.2.3.3.p.2"><p>1 から静的テーブルの長さの間の指定は静的テーブル内の 要素を参照します (<a href="#static.table" title="静的テーブル">Section 2.3.1</a> を 参照) 。</p></div><div id="rfc.section.2.3.3.p.3"><p>静的テーブルの長さより大きい指定は動的テーブル (<a href="#dynamic.table" title="動的テーブル">Section 2.3.2</a> を参照) 内の 要素を参照します。静的テーブルの長さは動的テーブルの インデックスを検索するため差し引かれます。</p></div><div id="rfc.section.2.3.3.p.4"><p>両方のテーブルの長さの合計値より大きい指定はデコード エラーとして扱われなければなりません (MUST) 。</p></div><div id="Index.Address.Space"></div><div id="rfc.figure.1"><p>静的テーブルサイズ s 、動的テーブルサイズ k として、 下記の図は全体の有効なインデックスアドレス空間を 示しています。</p><pre class="drawing">
        &lt;----------  Index Address Space ----------&gt;
        &lt;-- Static  Table --&gt;  &lt;-- Dynamic Table --&gt;
        +---+-----------+---+  +---+-----------+---+
        | 1 |    ...    | s |  |s+1|    ...    |s+k|
        +---+-----------+---+  +---+-----------+---+
                               ^                   |
                               |                   V
                        Insertion Point      Dropping Point
</pre></div><p class="figure">Figure 1: インデックスアドレス空間</p></div></div><div id="header.representation"><h2 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4</a> <a href="#header.representation">ヘッダフィールド表現</a></h2><div id="rfc.section.2.4.p.1"><p>エンコードされたヘッダフィールドはインデックスもしくは リテラルで表現できます。</p></div><div id="rfc.section.2.4.p.2"><p>An indexed representation defines a header field as a reference to an entry in either the static table or the dynamic table (see <a href="#indexed.header.representation" title="Indexed Header Field Representation">Section 6.1</a>).</p></div><div id="rfc.section.2.4.p.3"><p>リテラル表現は名前と値を指定することでヘッダフィールドを 定義します。ヘッダフィールド名はリテラル、もしくは静的テーブル または動的テーブルのエントリへの参照として表現できます。 ヘッダフィールド値はリテラルで表現されます。</p></div><div id="rfc.section.2.4.p.4"><p>3 つの異なるリテラル表現は下記のように定義されます: </p><ul><li>ヘッダフィールドを新しいエントリとして動的テーブルの 先頭に追加するリテラル表現 (<a href="#literal.header.with.incremental.indexing" title="Literal Header Field with Incremental Indexing">Section 6.2.1</a> を参照) 。</li><li>動的テーブルへのヘッダフィールドの追加を行わない リテラル表現 (<a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section 6.2.2</a> を参照) 。</li><li>特に中継者に再エンコードされる際に、ヘッダフィールドが 常にリテラル表現を使用するような追加条件を伴う、 動的テーブルへのヘッダフィールドの追加を行わない リテラル表現 (<a href="#literal.header.never.indexed" title="Literal Header Field never Indexed">Section 6.2.3</a> を参照) 。 この表現は圧縮によって危険にさらされないようヘッダフィールド値を 保護することを意図しています。 (詳細については <a href="#never.indexed.literals" title="Never Indexed Literals">Section 7.1.3</a> を参照) 。</li></ul></div><div id="rfc.section.2.4.p.5"><p>3 つの表現から 1 つを選択するのは、センシティブなヘッダフィールド値を保護するため、 セキュリティ情の理由から導くことができます (<a href="#compression.based.attacks" title="Probing Dynamic Table State">Section 7.1</a> を参照) 。</p></div><div id="rfc.section.2.4.p.6"><p>ヘッダフィールド名とヘッダフィールド値のリテラル表現は そのままのものか静的ハフマン符号 (<a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a> を参照) を用いたもののどちらかのオクテットの並びでエンコードできます。</p></div></div></div><div id="header.block.decoding"><h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#header.block.decoding">ヘッダブロックのデコード処理</a></h1><div id="header.block.processing"><h2 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1</a> <a href="#header.block.processing">ヘッダブロック処理</a></h2><div id="rfc.section.3.1.p.1"><p>デコーダはオリジナルのヘッダリストを逐次的に再構成することで ヘッダブロックを処理します。</p></div><div id="rfc.section.3.1.p.2"><p>ヘッダブロックはヘッダフィールド表現を連結したものです。 含められるヘッダフィールド表現の違いは <a href="#detailed.format" title="Binary Format">Section 6</a> で 説明します。</p></div><div id="rfc.section.3.1.p.3"><p>いったんヘッダフィールドがデコードされ再構成されたヘッダ リストに追加されたら、そのヘッダフィールドは削除することはできません。 ヘッダリストに追加されたヘッダフィールドはアプリケーションに 安全に渡されます。</p></div><div id="rfc.section.3.1.p.4"><p>アプリケーションに結果のヘッダフィールドを渡すことで、 デコーダは動的テーブルの他に最低限の一時的なメモリ消費で 実装できます。</p></div></div><div id="header.representation.processing"><h2 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2</a> <a href="#header.representation.processing">ヘッダフィールド表現の処理</a></h2><div id="rfc.section.3.2.p.1"><p>ヘッダリストを得るためのヘッダブロックの処理をこの節で 定義します。デコード処理でうまくヘッダリストを生成する ことを確実にするため、デコーダは下記の規則に従わなければ なりません (MUST) 。</p></div><div id="rfc.section.3.2.p.2"><p>ヘッダブロックに含まれるすべてのヘッダフィールド表現は 下記に示す通り、現れた順に処理されます。様々なヘッダ フィールド表現のフォーマットの詳細と、追加の処理命令は <a href="#detailed.format" title="Binary Format">Section 6</a> にあります。</p></div><div id="rfc.section.3.2.p.3"><p><em>インデックス表現</em> は 下記のアクションを 伴います: </p><ul><li>静的テーブルもしくは動的テーブルの参照されるエントリに 対応するヘッダフィールドをデコード済みヘッダリストに 追加する。</li></ul></div><div id="rfc.section.3.2.p.4"><p>動的テーブルに <em>追加されていない</em> <em>リテラル表現</em> は下記のアクションを伴います: action: </p><ul><li>ヘッダフィールドをデコード済みヘッダリストに 追加する。</li></ul></div><div id="rfc.section.3.2.p.5"><p>動的テーブルに <em>追加されている</em> <em>リテラル表現</em> は下記のアクションを伴います: </p><ul><li>ヘッダフィールドをデコード済みヘッダリストに 追加する。</li><li>ヘッダフィールドは動的テーブルの先頭に挿入されます。 この挿入処理は動的テーブルの以前のエントリの削除を 引き起こす可能性があります (<a href="#entry.addition" title="新しいエントリ追加時のエントリの削除">Section 4.4</a> を参照) 。</li></ul></div></div></div><div id="dynamic.table.management"><h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#dynamic.table.management">動的テーブルの管理</a></h1><div id="rfc.section.4.p.1"><p>デコーダ側のメモリ要件を制限するため、動的テーブルは サイズが制限されます。</p></div><div id="calculating.table.size"><h2 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1</a> <a href="#calculating.table.size">テーブルサイズの計算</a></h2><div id="rfc.section.4.1.p.1"><p>動的テーブルのサイズはそのエントリのサイズの合計値です。</p></div><div id="rfc.section.4.1.p.2"><p>エントリのサイズはその名前のオクテットの長さ (<a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a> で定義される 通り) と値のオクテットの長さに 32 を加えた合計値です。</p></div><div id="rfc.section.4.1.p.3"><p>エントリのサイズはハフマンエンコーディングの適用無しの 名前と値の長さで計算されます。</p></div><div id="rfc.section.4.1.p.4"><dl><dt>注意:</dt><dd>エントリに関連付くオーバーヘッドとして追加の 32 オクテットを付加します。例として、エントリの名前と値を 参照するための 2 つの 64 ビットポインタと、名前と値への 参照数を数える 2 つの 64 ビット整数を使うエントリ構造 は 32 オクテットのオーバーヘッドを持ちます。</dd></dl></div></div><div id="maximum.table.size"><h2 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2</a> <a href="#maximum.table.size">最大テーブルサイズ</a></h2><div id="rfc.section.4.2.p.1"><p>HPACK を使用するプロトコルは、エンコーダが動的テーブルに 使用することが許可される最大サイズを決定します。 HTTP/2 に おいて、この値は SETTINGS_HEADER_TABLE_SIZE 設定 (<a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a> の 6.5.2 節を 参照) で決定されます。</p></div><div id="rfc.section.4.2.p.2"><p>エンコーダはこの最大値より小さな容量を使用することを選択する ことが可能です (<a href="#encoding.context.update" title="Dynamic Table Size Update">Section 6.3</a> を 参照) が、その値はプロトコルによって設定された最大値 以下に留めなければなりません (MUST) 。</p></div><div id="rfc.section.4.2.p.3"><p>動的テーブルの最大サイズの変更はエンコーディングコンテキスト更新 (<a href="#encoding.context.update" title="Dynamic Table Size Update">Section 6.3</a> を参照) から通知されます。 エンコーディングコンテキスト更新は動的テーブルサイズの変更に続いて、最初の ヘッダブロックの先頭で行わなければなりません (MUST) 。 HTTP/2 において、これは設定同期 (<a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a> の 6.5.3 節を 参照) で追従します。</p></div><div id="rfc.section.4.2.p.4"><p>二つのヘッダブロックの送信の間に複数のテーブルサイズの最大値の 更新が起こる可能性があります。この場合このサイズはこの区間内に 一度以上変更され、区間内に現れた最小の最大テーブルサイズが エンコーディングコンテキスト更新内で通知されなければなりません (MUST) 。 最終的な最大サイズは常に通知され、多くて二つのエンコーディングコンテキスト更新が 引き起こされます。これはデコーダがデコーダテーブルサイズに基づき 削除を実行することを可能にするのを確実にします (<a href="#entry.eviction" title="動的テーブルサイズ変更時のエントリの削除">Section 4.3</a> を参照) 。</p></div><div id="rfc.section.4.2.p.5"><p>このメカニズムで 0 の最大サイズを設定することで動的テーブル からエントリを完全にクリアして、その後に再格納することが できます。</p></div></div><div id="entry.eviction"><h2 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3</a> <a href="#entry.eviction">動的テーブルサイズ変更時のエントリの削除</a></h2><div id="rfc.section.4.3.p.1"><p>動的テーブルの最大サイズが減少するたびに、動的テーブルの サイズが最大サイズ以下になるまで動的テーブルの末尾から エントリが削除されます。</p></div></div><div id="entry.addition"><h2 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4</a> <a href="#entry.addition">新しいエントリ追加時のエントリの削除</a></h2><div id="rfc.section.4.4.p.1"><p>動的テーブルに新しいエントリが追加される前に、 動的テーブルのサイズが (最大サイズ - 新しいエントリサイズ) 以下になるかテーブルが空になるまで動的テーブルの末尾から エントリが削除されます。</p></div><div id="rfc.section.4.4.p.2"><p>もし新しいエントリのサイズが最大サイズ以下なら、エントリは テーブルに追加されます。最大サイズより大きいエントリの 追加を試みることはエラーにはなりません; 最大サイズより 大きなエントリの追加を試みるとすべてのエントリを空にすることに なり、テーブルを空にする結果になります。</p></div><div id="rfc.section.4.4.p.3"><p>動的テーブルに新しいエントリを追加する際、そのエントリは 削除される可能性のある動的テーブルのエントリの名前を参照する可能性があります。 新しいエントリを挿入する前に動的テーブルから参照されるエントリが 削除される場合、参照される名前を削除するのを避けるよう実装に注意してください。</p></div></div></div><div id="low-level.representation"><h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#low-level.representation">Primitive Type Representations</a></h1><div id="rfc.section.5.p.1"><p>HPACK encoding uses two primitive types: unsigned variable length integers, and strings of octets.</p></div><div id="integer.representation"><h2 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a> <a href="#integer.representation">Integer Representation</a></h2><div id="rfc.section.5.1.p.1"><p>Integers are used to represent name indexes, header field indexes or string lengths. An integer representation can start anywhere within an octet. To allow for optimized processing, an integer representation always finishes at the end of an octet.</p></div><div id="rfc.section.5.1.p.2"><p>An integer is represented in two parts: a prefix that fills the current octet and an optional list of octets that are used if the integer value does not fit within the prefix. The number of bits of the prefix (called N) is a parameter of the integer representation.</p></div><div id="rfc.section.5.1.p.3"><p>If the integer value is small enough, i.e., strictly less than 2^N-1, it is encoded within the N-bit prefix.</p></div><div id="Integer.Value.Encoded.within.the.Prefix.shown.for.N.5"></div><div id="rfc.figure.2"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| ? | ? | ? |       Value       |
+---+---+---+-------------------+
</pre></div><p class="figure">Figure 2: Integer Value Encoded within the Prefix (shown for N = 5)</p><div id="rfc.section.5.1.p.4"><p>Otherwise, all the bits of the prefix are set to 1 and the value, decreased by 2^N-1, is encoded using a list of one or more octets. The most significant bit of each octet is used as a continuation flag: its value is set to 1 except for the last octet in the list. The remaining bits of the octets are used to encode the decreased value.</p></div><div id="Integer.Value.Encoded.after.the.Prefix.shown.for.N.5"></div><div id="rfc.figure.3"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| ? | ? | ? | 1   1   1   1   1 |
+---+---+---+-------------------+
| 1 |    Value-(2^N-1) LSB      |
+---+---------------------------+
               ...
+---+---------------------------+
| 0 |    Value-(2^N-1) MSB      |
+---+---------------------------+
</pre></div><p class="figure">Figure 3: Integer Value Encoded after the Prefix (shown for N = 5)</p><div id="rfc.section.5.1.p.5"><p>Decoding the integer value from the list of octets starts by reversing the order of the octets in the list. Then, for each octet, its most significant bit is removed. The remaining bits of the octets are concatenated and the resulting value is increased by 2^N-1 to obtain the integer value.</p></div><div id="rfc.section.5.1.p.6"><p>The prefix size, N, is always between 1 and 8 bits. An integer starting at an octet-boundary will have an 8-bit prefix.</p></div><div id="rfc.figure.u.1"><p>Pseudo-code to represent an integer I is as follows:</p><pre class="inline">
if I &lt; 2^N - 1, encode I on N bits
else
    encode (2^N - 1) on N bits
    I = I - (2^N - 1)
    while I &gt;= 128
         encode (I % 128 + 128) on 8 bits
         I = I / 128
    encode I on 8 bits
</pre></div><div id="rfc.figure.u.2"><p>Pseudo-code to decode an integer I is as follows:</p><pre class="inline">
decode I from the next N bits
if I &lt; 2^N - 1, return I
else
    M = 0
    repeat
        B = next octet
        I = I + (B &amp; 127) * 2^M
        M = M + 7
    while B &amp; 128 == 128
    return I
</pre></div><div id="rfc.section.5.1.p.7"><p>Examples illustrating the encoding of integers are available in <a href="#integer.representation.examples" title="Integer Representation Examples">Appendix C.1</a>.</p></div><div id="rfc.section.5.1.p.8"><p>This integer representation allows for values of indefinite size. It is also possible for an encoder to send a large number of zero values, which can waste octets and could be used to overflow integer values. Integer encodings that exceed an implementation limits - in value or octet length - MUST be treated as a decoding error. Different limits can be set for each of the different uses of integers, based on implementation constraints.</p></div></div><div id="string.literal.representation"><h2 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a> <a href="#string.literal.representation">String Literal Representation</a></h2><div id="rfc.section.5.2.p.1"><p>Header field names and header field values can be represented as literal strings. A literal string is encoded as a sequence of octets, either by directly encoding the literal string's octets, or by using a Huffman code (see <a href="#HUFFMAN"><cite title="A Method for the Construction of Minimum Redundancy Codes">[HUFFMAN]</cite></a>).</p></div><div id="String.Literal.Representation"></div><div id="rfc.figure.4"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| H |    String Length (7+)     |
+---+---------------------------+
|  String Data (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 4: String Literal Representation</p><div id="rfc.section.5.2.p.2"><p>A literal string representation contains the following fields: </p><dl><dt>H:</dt><dd>A one bit flag, H, indicating whether or not the octets of the string are Huffman encoded.</dd><dt>String Length:</dt><dd>The number of octets used to encode the string literal, encoded as an integer with 7-bit prefix (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>).</dd><dt>String Data:</dt><dd>The encoded data of the string literal. If H is '0', then the encoded data is the raw octets of the string literal. If H is '1', then the encoded data is the Huffman encoding of the string literal.</dd></dl></div><div id="rfc.section.5.2.p.3"><p>String literals which use Huffman encoding are encoded with the Huffman code defined in <a href="#huffman.code" title="Huffman Code">Appendix B</a> (see examples for requests in <a href="#request.examples.with.huffman.coding" title="Request Examples with Huffman Coding">Appendix C.4</a> and for responses in <a href="#response.examples.with.huffman.coding" title="Response Examples with Huffman Coding">Appendix C.6</a>). The encoded data is the bitwise concatenation of the codes corresponding to each octet of the string literal.</p></div><div id="rfc.section.5.2.p.4"><p>As the Huffman encoded data doesn't always end at an octet boundary, some padding is inserted after it, up to the next octet boundary. To prevent this padding to be misinterpreted as part of the string literal, the most significant bits of the code corresponding to the EOS (end-of-string) symbol are used.</p></div><div id="rfc.section.5.2.p.5"><p>Upon decoding, an incomplete code at the end of the encoded data is to be considered as padding and discarded. A padding strictly longer than 7 bits MUST be treated as a decoding error. A padding not corresponding to the most significant bits of the code for the EOS symbol MUST be treated as a decoding error. A Huffman encoded string literal containing the EOS symbol MUST be treated as a decoding error.</p></div></div></div><div id="detailed.format"><h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#detailed.format">Binary Format</a></h1><div id="rfc.section.6.p.1"><p>This section describes the detailed format of each of the different header field representations, plus the encoding context update instruction.</p></div><div id="indexed.header.representation"><h2 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1</a> <a href="#indexed.header.representation">Indexed Header Field Representation</a></h2><div id="rfc.section.6.1.p.1"><p>An indexed header field representation identifies an entry in either the static table or the dynamic table (see <a href="#indexing.tables" title="インデックステーブル">Section 2.3</a>).</p></div><div id="rfc.section.6.1.p.2"><p>An indexed header field representation causes a header field to be added to the decoded header list, as described in <a href="#header.representation.processing" title="ヘッダフィールド表現の処理">Section 3.2</a>.</p></div><div id="Indexed.Header.Field"></div><div id="rfc.figure.5"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 1 |        Index (7+)         |
+---+---------------------------+
</pre></div><p class="figure">Figure 5: Indexed Header Field</p><div id="rfc.section.6.1.p.3"><p>An indexed header field starts with the '1' 1-bit pattern, followed by the index of the matching header field, represented as an integer with a 7-bit prefix (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>).</p></div><div id="rfc.section.6.1.p.4"><p>The index value of 0 is not used. It MUST be treated as a decoding error if found in an indexed header field representation.</p></div></div><div id="literal.header.representation"><h2 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2</a> <a href="#literal.header.representation">Literal Header Field Representation</a></h2><div id="rfc.section.6.2.p.1"><p>A literal header field representation contains a literal header field value. Header field names are either provided as a literal or by reference to an existing table entry, either from the static table or the dynamic table (see <a href="#indexing.tables" title="インデックステーブル">Section 2.3</a>).</p></div><div id="rfc.section.6.2.p.2"><p>This specification defines three forms of literal header field representations; with indexing, without indexing, and never indexed.</p></div><div id="literal.header.with.incremental.indexing"><h3 id="rfc.section.6.2.1"><a href="#rfc.section.6.2.1">6.2.1</a> <a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></h3><div id="rfc.section.6.2.1.p.1"><p>A literal header field with incremental indexing representation results in appending a header field to the decoded header list and inserting it as a new entry into the dynamic table.</p></div><div id="Literal.Header.Field.with.Incremental.Indexing.Indexed.Name"></div><div id="rfc.figure.6"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |      Index (6+)       |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 6: Literal Header Field with Incremental Indexing - Indexed Name</p><div id="Literal.Header.Field.with.Incremental.Indexing.New.Name"></div><div id="rfc.figure.7"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |           0           |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 7: Literal Header Field with Incremental Indexing - New Name</p><div id="rfc.section.6.2.1.p.2"><p>A literal header field with incremental indexing representation starts with the '01' 2-bit pattern.</p></div><div id="rfc.section.6.2.1.p.3"><p>If the header field name matches the header field name of an entry stored in the static table or the dynamic table, the header field name can be represented using the index of that entry. In this case, the index of the entry is represented as an integer with a 6-bit prefix (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>). This value is always non-zero.</p></div><div id="rfc.section.6.2.1.p.4"><p>Otherwise, the header field name is represented as a literal string (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>). A value 0 is used in place of the 6-bit index, followed by the header field name.</p></div><div id="rfc.section.6.2.1.p.5"><p>Either form of header field name representation is followed by the header field value represented as a literal string (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>).</p></div></div><div id="literal.header.without.indexing"><h3 id="rfc.section.6.2.2"><a href="#rfc.section.6.2.2">6.2.2</a> <a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></h3><div id="rfc.section.6.2.2.p.1"><p>A literal header field without indexing representation results in appending a header field to the decoded header list without altering the dynamic table.</p></div><div id="Literal.Header.Field.without.Indexing.Indexed.Name"></div><div id="rfc.figure.8"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 8: Literal Header Field without Indexing - Indexed Name</p><div id="Literal.Header.Field.without.Indexing.New.Name"></div><div id="rfc.figure.9"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 9: Literal Header Field without Indexing - New Name</p><div id="rfc.section.6.2.2.p.2"><p>A literal header field without indexing representation starts with the '0000' 4-bit pattern.</p></div><div id="rfc.section.6.2.2.p.3"><p>If the header field name matches the header field name of an entry stored in the static table or the dynamic table, the header field name can be represented using the index of that entry. In this case, the index of the entry is represented as an integer with a 4-bit prefix (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>). This value is always non-zero.</p></div><div id="rfc.section.6.2.2.p.4"><p>Otherwise, the header field name is represented as a literal string (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>). A value 0 is used in place of the 4-bit index, followed by the header field name.</p></div><div id="rfc.section.6.2.2.p.5"><p>Either form of header field name representation is followed by the header field value represented as a literal string (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>).</p></div></div><div id="literal.header.never.indexed"><h3 id="rfc.section.6.2.3"><a href="#rfc.section.6.2.3">6.2.3</a> <a href="#literal.header.never.indexed">Literal Header Field never Indexed</a></h3><div id="rfc.section.6.2.3.p.1"><p>A literal header field never indexed representation results in appending a header field to the decoded header list without altering the dynamic table. Intermediaries MUST use the same representation for encoding this header field.</p></div><div id="Literal.Header.Field.never.Indexed.Indexed.Name"></div><div id="rfc.figure.10"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 10: Literal Header Field never Indexed - Indexed Name</p><div id="Literal.Header.Field.never.Indexed.New.Name"></div><div id="rfc.figure.11"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre></div><p class="figure">Figure 11: Literal Header Field never Indexed - New Name</p><div id="rfc.section.6.2.3.p.2"><p>A literal header field never indexed representation starts with the '0001' 4-bit pattern.</p></div><div id="rfc.section.6.2.3.p.3"><p>When a header field is represented as a literal header field never indexed, it MUST always be encoded with this specific literal representation. In particular, when a peer sends a header field that it received represented as a literal header field never indexed, it MUST use the same representation to forward this header field.</p></div><div id="rfc.section.6.2.3.p.4"><p>This representation is intended for protecting header field values that are not to be put at risk by compressing them (see <a href="#compression.based.attacks" title="Probing Dynamic Table State">Section 7.1</a> for more details).</p></div><div id="rfc.section.6.2.3.p.5"><p>The encoding of the representation is identical to the literal header field without indexing (see <a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section 6.2.2</a>).</p></div></div></div><div id="encoding.context.update"><h2 id="rfc.section.6.3"><a href="#rfc.section.6.3">6.3</a> <a href="#encoding.context.update">Dynamic Table Size Update</a></h2><div id="rfc.section.6.3.p.1"><p>A dynamic table size update signals a change to the size of the dynamic table.</p></div><div id="Maximum.Dynamic.Table.Size.Change"></div><div id="rfc.figure.12"><pre class="inline">
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 |   Max size (5+)   |
+---+---------------------------+
</pre></div><p class="figure">Figure 12: Maximum Dynamic Table Size Change</p><div id="rfc.section.6.3.p.2"><p>A dynamic table size update starts with the '001' 3-bit pattern, followed by the new maximum size, represented as an integer with a 5-bit prefix (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>).</p></div><div id="rfc.section.6.3.p.3"><p>The new maximum size MUST be lower than or equal to the limit determined by the protocol using HPACK. A value that exceeds this limit MUST be treated as a decoding error. In HTTP/2, this limit is the last value of the SETTINGS_HEADER_TABLE_SIZE parameter (see Section 6.5.2 of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>) received from the decoder and acknowledged by the encoder (see Section 6.5.3 of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>).</p></div><div id="rfc.section.6.3.p.4"><p>Reducing the maximum size of the dynamic table can cause entries to be evicted (see <a href="#entry.eviction" title="動的テーブルサイズ変更時のエントリの削除">Section 4.3</a>).</p></div></div></div><div id="Security"><h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#Security">Security Considerations</a></h1><div id="rfc.section.7.p.1"><p>This section describes potential areas of security concern with HPACK: </p><ul><li>Use of compression as a length-based oracle for verifying guesses about secrets that are compressed into a shared compression context.</li><li>Denial of service resulting from exhausting processing or memory capacity at a decoder.</li></ul></div><div id="compression.based.attacks"><h2 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1</a> <a href="#compression.based.attacks">Probing Dynamic Table State</a></h2><div id="rfc.section.7.1.p.1"><p>HPACK reduces the length of header field encodings by exploiting the redundancy inherent in protocols like HTTP. The ultimate goal of this is to reduce the amount of data that is required to send HTTP requests or responses.</p></div><div id="rfc.section.7.1.p.2"><p>The compression context used to encode header fields can be probed by an attacker who can both define header fields to be encoded and transmitted and observe the length of those fields once they are encoded. When an attacker can do both, they can adaptively modify requests in order to confirm guesses about the dynamic table state. If a guess is compressed into a shorter length, the attacker can observe the encoded length and infer that the guess was correct.</p></div><div id="rfc.section.7.1.p.3"><p>This is possible even over the Transport Layer Security Protocol (TLS, see <a href="#TLS12"><cite title="The Transport Layer Security (TLS) Protocol Version 1.2">[TLS12]</cite></a>), because while TLS provides confidentiality protection for content, it only provides a limited amount of protection for the length of that content. </p><dl><dt>Note:</dt><dd>Padding schemes only provide limited protection against an attacker with these capabilities, potentially only forcing an increased number of guesses to learn the length associated with a given guess. Padding schemes also work directly against compression by increasing the number of bits that are transmitted.</dd></dl></div><div id="rfc.section.7.1.p.4"><p>Attacks like <a href="#CRIME">CRIME</a> <cite title="The CRIME Attack">[CRIME]</cite> demonstrated the existence of these general attacker capabilities. The specific attack exploited the fact that <a href="#DEFLATE">DEFLATE</a> <cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite> removes redundancy based on prefix matching. This permitted the attacker to confirm guesses a character at a time, reducing an exponential-time attack into a linear-time attack.</p></div><div><h3 id="rfc.section.7.1.1"><a href="#rfc.section.7.1.1">7.1.1</a> Applicability to HPACK and HTTP</h3><div id="rfc.section.7.1.1.p.1"><p>HPACK mitigates but does not completely prevent attacks modeled on <a href="#CRIME">CRIME</a> <cite title="The CRIME Attack">[CRIME]</cite> by forcing a guess to match an entire header field value, rather than individual characters. An attacker can only learn whether a guess is correct or not, so is reduced to a brute force guess for the header field values.</p></div><div id="rfc.section.7.1.1.p.2"><p>The viability of recovering specific header field values therefore depends on the entropy of values. As a result, values with high entropy are unlikely to be recovered successfully. However, values with low entropy remain vulnerable.</p></div><div id="rfc.section.7.1.1.p.3"><p>Attacks of this nature are possible any time that two mutually distrustful entities control requests or responses that are placed onto a single HTTP/2 connection. If the shared HPACK compressor permits one entity to add entries to the dynamic table, and the other to access those entries, then the state of the table can be learned.</p></div><div id="rfc.section.7.1.1.p.4"><p>Having requests or responses from mutually distrustful entities occurs when an intermediary either: </p><ul><li>sends requests from multiple clients on a single connection toward an origin server, or</li><li>takes responses from multiple origin servers and places them on a shared connection toward a client.</li></ul><p> Web browsers also need to assume that requests made on the same connection by different <a href="#ORIGIN">web origins</a> <cite title="The Web Origin Concept">[ORIGIN]</cite> are made by mutually distrustful entities.</p></div></div><div><h3 id="rfc.section.7.1.2"><a href="#rfc.section.7.1.2">7.1.2</a> Mitigation</h3><div id="rfc.section.7.1.2.p.1"><p>Users of HTTP that require confidentiality for header fields can use values with entropy sufficient to make guessing infeasible. However, this is impractical as a general solution because it forces all users of HTTP to take steps to mitigate attacks. It would impose new constraints on how HTTP is used.</p></div><div id="rfc.section.7.1.2.p.2"><p>Rather than impose constraints on users of HTTP, an implementation of HPACK can instead constrain how compression is applied in order to limit the potential for dynamic table probing.</p></div><div id="rfc.section.7.1.2.p.3"><p>An ideal solution segregates access to the dynamic table based on the entity that is constructing header fields. Header field values that are added to the table are attributed to an entity, and only the entity that created a particular value can extract that value.</p></div><div id="rfc.section.7.1.2.p.4"><p>To improve compression performance of this option, certain entries might be tagged as being public. For example, a web browser might make the values of the Accept-Encoding header field available in all requests.</p></div><div id="rfc.section.7.1.2.p.5"><p>An encoder without good knowledge of the provenance of header fields might instead introduce a penalty for a header field with many different values, such that a large number of attempts to guess a header field value results in the header field no more being compared to the dynamic table entries in future messages, effectively preventing further guesses. </p><dl><dt>Note:</dt><dd>Simply removing entries corresponding to the header field from the dynamic table can be ineffectual if the attacker has a reliable way of causing values to be reinstalled. For example, a request to load an image in a web browser typically includes the Cookie header field (a potentially highly valued target for this sort of attack), and web sites can easily force an image to be loaded, thereby refreshing the entry in the dynamic table.</dd></dl></div><div id="rfc.section.7.1.2.p.6"><p>This response might be made inversely proportional to the length of the header field value. Marking a header field as not using the dynamic table any more might occur for shorter values more quickly or with higher probability than for longer values.</p></div></div><div id="never.indexed.literals"><h3 id="rfc.section.7.1.3"><a href="#rfc.section.7.1.3">7.1.3</a> <a href="#never.indexed.literals">Never Indexed Literals</a></h3><div id="rfc.section.7.1.3.p.1"><p>Implementations can also choose to protect sensitive header fields by not compressing them and instead encoding their value as literals.</p></div><div id="rfc.section.7.1.3.p.2"><p>Refusing to generate an indexed representation for a header field is only effective if compression is avoided on all hops. The never indexed literal (see <a href="#literal.header.never.indexed" title="Literal Header Field never Indexed">Section 6.2.3</a>) can be used to signal to intermediaries that a particular value was intentionally sent as a literal.</p></div><div id="rfc.section.7.1.3.p.3"><p>An intermediary MUST NOT re-encode a value that uses the never indexed literal representation with another representation that would index it. If HPACK is used for re-encoding, the never indexed literal representation MUST be used.</p></div><div id="rfc.section.7.1.3.p.4"><p>The choice to use a never indexed literal representation for a header field depends on several factors. Since HPACK doesn't protect against guessing an entire header field value, short or low-entropy values are more readily recovered by an adversary. Therefore, an encoder might choose not to index values with low entropy.</p></div><div id="rfc.section.7.1.3.p.5"><p>An encoder might also choose not to index values for header fields that are considered to be highly valuable or sensitive to recovery, such as the Cookie or Authorization header fields.</p></div><div id="rfc.section.7.1.3.p.6"><p>On the contrary, an encoder might prefer indexing values for header fields that have little or no value if they were exposed. For instance, a User-Agent header field does not commonly vary between requests and is sent to any server. In that case, confirmation that a particular User-Agent value has been used provides little value.</p></div><div id="rfc.section.7.1.3.p.7"><p>Note that these criteria for deciding to use a never indexed literal representation will evolve over time as new attacks are discovered.</p></div></div></div><div><h2 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2</a> Static Huffman Encoding</h2><div id="rfc.section.7.2.p.1"><p>There is no currently known attack against a static Huffman encoding. A study has shown that using a static Huffman encoding table created an information leakage, however this same study concluded that an attacker could not take advantage of this information leakage to recover any meaningful amount of information (see <a href="#PETAL"><cite title="PETAL: Preset Encoding Table Information Leakage">[PETAL]</cite></a>).</p></div></div><div><h2 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3</a> Memory Consumption</h2><div id="rfc.section.7.3.p.1"><p>An attacker can try to cause an endpoint to exhaust its memory. HPACK is designed to limit both the peak and state amounts of memory allocated by an endpoint.</p></div><div id="rfc.section.7.3.p.2"><p>The amount of memory used by the compressor is limited by the protocol using HPACK through the definition of the maximum size of the dynamic table. In HTTP/2, this value is controlled by the decoder through the setting parameter SETTINGS_HEADER_TABLE_SIZE (see Section 6.5.2 of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>). This limit takes into account both the size of the data stored in the dynamic table, plus a small allowance for overhead.</p></div><div id="rfc.section.7.3.p.3"><p>A decoder can limit the amount of state memory used by setting an appropriate value for the maximum size of the dynamic table. In HTTP/2, this is realized by setting an appropriate value for the SETTINGS_HEADER_TABLE_SIZE parameter. An encoder can limit the amount of state memory it uses by signaling lower dynamic table size than the decoder allows (see <a href="#encoding.context.update" title="Dynamic Table Size Update">Section 6.3</a>).</p></div><div id="rfc.section.7.3.p.4"><p>The amount of temporary memory consumed by an encoder or decoder can be limited by processing header fields sequentially. An implementation does not need to retain a complete list of header fields. Note however that it might be necessary for an application to retain a complete header list for other reasons; even though HPACK does not force this to occur, application constraints might make this necessary.</p></div></div><div><h2 id="rfc.section.7.4"><a href="#rfc.section.7.4">7.4</a> Implementation Limits</h2><div id="rfc.section.7.4.p.1"><p>An implementation of HPACK needs to ensure that large values for integers, long encoding for integers, or long string literals do not create security weaknesses.</p></div><div id="rfc.section.7.4.p.2"><p>An implementation has to set a limit for the values it accepts for integers, as well as for the encoded length (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>). In the same way, it has to set a limit to the length it accepts for string literals (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>).</p></div></div></div><div><h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> IANA Considerations</h1><div id="rfc.section.8.p.1"><p>This document has no IANA actions.</p></div></div><div><h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> Acknowledgments</h1><div id="rfc.section.9.p.1"><p>This specification includes substantial input from the following individuals: </p><ul><li>Mike Bishop, Jeff Pinner, Julian Reschke, Martin Thomson (substantial editorial contributions).</li><li>Johnny Graettinger (Huffman code statistics).</li></ul></div></div><h1 id="rfc.references"><a id="rfc.section.10" href="#rfc.section.10">10.</a> 参考文献</h1><h2 id="rfc.references.1"><a href="#rfc.section.10.1" id="rfc.section.10.1">10.1</a> Normative References</h2><table><tr><td class="reference"><b id="HTTP2">[HTTP2]</b></td><td class="top">Belshe, M., Peon, R., and M. Thomson, Ed., “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-17">Hypertext Transfer Protocol version 2</a>”, Internet-Draft draft-ietf-httpbis-http2-17 (work in progress), February 2015.</td></tr><tr><td class="reference"><b id="RFC2119">[RFC2119]</b></td><td class="top">Bradner, S., “<a href="http://www.rfc-editor.org/info/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP 14, RFC 2119, March 1997, &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.</td></tr><tr><td class="reference"><b id="RFC7230">[RFC7230]</b></td><td class="top">Fielding, R., Ed. and J. Reschke, Ed., “<a href="http://www.rfc-editor.org/info/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>”, RFC 7230, June 2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.</td></tr></table><h2 id="rfc.references.2"><a href="#rfc.section.10.2" id="rfc.section.10.2">10.2</a> Informative References</h2><table><tr><td class="reference"><b id="CANONICAL">[CANONICAL]</b></td><td class="top">Schwartz, E. and B. Kallick, “<a href="https://dl.acm.org/citation.cfm?id=363991">Generating a canonical prefix encoding</a>”, Communications of the ACM Volume 7 Issue 3, pp. 166-169, March 1964, &lt;<a href="https://dl.acm.org/citation.cfm?id=363991">https://dl.acm.org/citation.cfm?id=363991</a>&gt;.</td></tr><tr><td class="reference"><b id="CRIME">[CRIME]</b></td><td class="top">Rizzo, J. and T. Duong, “<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU">The CRIME Attack</a>”, September 2012, &lt;<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU">https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU</a>&gt;.</td></tr><tr><td class="reference"><b id="DEFLATE">[DEFLATE]</b></td><td class="top">Deutsch, P., “<a href="http://www.rfc-editor.org/info/rfc1951">DEFLATE Compressed Data Format Specification version 1.3</a>”, RFC 1951, May 1996, &lt;<a href="http://www.rfc-editor.org/info/rfc1951">http://www.rfc-editor.org/info/rfc1951</a>&gt;.</td></tr><tr><td class="reference"><b id="HUFFMAN">[HUFFMAN]</b></td><td class="top">Huffman, D., “<a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">A Method for the Construction of Minimum Redundancy Codes</a>”, Proceedings of the Institute of Radio Engineers Volume 40, Number 9, pp. 1098-1101, September 1952, &lt;<a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119</a>&gt;.</td></tr><tr><td class="reference"><b id="ORIGIN">[ORIGIN]</b></td><td class="top">Barth, A., “<a href="http://www.rfc-editor.org/info/rfc6454">The Web Origin Concept</a>”, RFC 6454, December 2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6454">http://www.rfc-editor.org/info/rfc6454</a>&gt;.</td></tr><tr><td class="reference"><b id="PETAL">[PETAL]</b></td><td class="top">Tan, J. and J. Nahata, “<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">PETAL: Preset Encoding Table Information Leakage</a>”, April 2013, &lt;<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf</a>&gt;.</td></tr><tr><td class="reference"><b id="SPDY">[SPDY]</b></td><td class="top">Belshe, M. and R. Peon, “<a href="https://tools.ietf.org/html/draft-mbelshe-httpbis-spdy-00">SPDY Protocol</a>”, Internet-Draft draft-mbelshe-httpbis-spdy-00 (work in progress), February 2012.</td></tr><tr><td class="reference"><b id="TLS12">[TLS12]</b></td><td class="top">Dierks, T. and E. Rescorla, “<a href="http://www.rfc-editor.org/info/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>”, RFC 5246, August 2008, &lt;<a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.</td></tr></table><div id="static.table.definition"><h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a> <a href="#static.table.definition">Static Table Definition</a></h1><div id="rfc.section.A.p.1"><p>The static table (see <a href="#static.table" title="静的テーブル">Section 2.3.1</a>) consists in a predefined and unchangeable list of header fields.</p></div><div id="rfc.section.A.p.2"><p>The static table was created from the most frequent header fields used by popular web sites, with the addition of HTTP/2-specific pseudo-header fields (see Section 8.1.2.1 of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>). For header fields with a few frequent values, an entry was added for each of these frequent values. For other header fields, an entry was added with an empty value.</p></div><div id="rfc.section.A.p.3"><p>The following table lists the predefined header fields that make-up the static table.</p></div><div id="rfc.table.1"><div id="static.table.entries"></div><table class="tt full center" cellpadding="3" cellspacing="0"><caption>Table 1: Static Table Entries</caption><thead><tr><th>Index</th><th>Header Name</th><th>Header Value</th></tr></thead><tbody><tr><td class="left">1</td><td class="left">:authority</td><td class="left"></td></tr><tr><td class="left">2</td><td class="left">:method</td><td class="left">GET</td></tr><tr><td class="left">3</td><td class="left">:method</td><td class="left">POST</td></tr><tr><td class="left">4</td><td class="left">:path</td><td class="left">/</td></tr><tr><td class="left">5</td><td class="left">:path</td><td class="left">/index.html</td></tr><tr><td class="left">6</td><td class="left">:scheme</td><td class="left">http</td></tr><tr><td class="left">7</td><td class="left">:scheme</td><td class="left">https</td></tr><tr><td class="left">8</td><td class="left">:status</td><td class="left">200</td></tr><tr><td class="left">9</td><td class="left">:status</td><td class="left">204</td></tr><tr><td class="left">10</td><td class="left">:status</td><td class="left">206</td></tr><tr><td class="left">11</td><td class="left">:status</td><td class="left">304</td></tr><tr><td class="left">12</td><td class="left">:status</td><td class="left">400</td></tr><tr><td class="left">13</td><td class="left">:status</td><td class="left">404</td></tr><tr><td class="left">14</td><td class="left">:status</td><td class="left">500</td></tr><tr><td class="left">15</td><td class="left">accept-charset</td><td class="left"></td></tr><tr><td class="left">16</td><td class="left">accept-encoding</td><td class="left">gzip, deflate</td></tr><tr><td class="left">17</td><td class="left">accept-language</td><td class="left"></td></tr><tr><td class="left">18</td><td class="left">accept-ranges</td><td class="left"></td></tr><tr><td class="left">19</td><td class="left">accept</td><td class="left"></td></tr><tr><td class="left">20</td><td class="left">access-control-allow-origin</td><td class="left"></td></tr><tr><td class="left">21</td><td class="left">age</td><td class="left"></td></tr><tr><td class="left">22</td><td class="left">allow</td><td class="left"></td></tr><tr><td class="left">23</td><td class="left">authorization</td><td class="left"></td></tr><tr><td class="left">24</td><td class="left">cache-control</td><td class="left"></td></tr><tr><td class="left">25</td><td class="left">content-disposition</td><td class="left"></td></tr><tr><td class="left">26</td><td class="left">content-encoding</td><td class="left"></td></tr><tr><td class="left">27</td><td class="left">content-language</td><td class="left"></td></tr><tr><td class="left">28</td><td class="left">content-length</td><td class="left"></td></tr><tr><td class="left">29</td><td class="left">content-location</td><td class="left"></td></tr><tr><td class="left">30</td><td class="left">content-range</td><td class="left"></td></tr><tr><td class="left">31</td><td class="left">content-type</td><td class="left"></td></tr><tr><td class="left">32</td><td class="left">cookie</td><td class="left"></td></tr><tr><td class="left">33</td><td class="left">date</td><td class="left"></td></tr><tr><td class="left">34</td><td class="left">etag</td><td class="left"></td></tr><tr><td class="left">35</td><td class="left">expect</td><td class="left"></td></tr><tr><td class="left">36</td><td class="left">expires</td><td class="left"></td></tr><tr><td class="left">37</td><td class="left">from</td><td class="left"></td></tr><tr><td class="left">38</td><td class="left">host</td><td class="left"></td></tr><tr><td class="left">39</td><td class="left">if-match</td><td class="left"></td></tr><tr><td class="left">40</td><td class="left">if-modified-since</td><td class="left"></td></tr><tr><td class="left">41</td><td class="left">if-none-match</td><td class="left"></td></tr><tr><td class="left">42</td><td class="left">if-range</td><td class="left"></td></tr><tr><td class="left">43</td><td class="left">if-unmodified-since</td><td class="left"></td></tr><tr><td class="left">44</td><td class="left">last-modified</td><td class="left"></td></tr><tr><td class="left">45</td><td class="left">link</td><td class="left"></td></tr><tr><td class="left">46</td><td class="left">location</td><td class="left"></td></tr><tr><td class="left">47</td><td class="left">max-forwards</td><td class="left"></td></tr><tr><td class="left">48</td><td class="left">proxy-authenticate</td><td class="left"></td></tr><tr><td class="left">49</td><td class="left">proxy-authorization</td><td class="left"></td></tr><tr><td class="left">50</td><td class="left">range</td><td class="left"></td></tr><tr><td class="left">51</td><td class="left">referer</td><td class="left"></td></tr><tr><td class="left">52</td><td class="left">refresh</td><td class="left"></td></tr><tr><td class="left">53</td><td class="left">retry-after</td><td class="left"></td></tr><tr><td class="left">54</td><td class="left">server</td><td class="left"></td></tr><tr><td class="left">55</td><td class="left">set-cookie</td><td class="left"></td></tr><tr><td class="left">56</td><td class="left">strict-transport-security</td><td class="left"></td></tr><tr><td class="left">57</td><td class="left">transfer-encoding</td><td class="left"></td></tr><tr><td class="left">58</td><td class="left">user-agent</td><td class="left"></td></tr><tr><td class="left">59</td><td class="left">vary</td><td class="left"></td></tr><tr><td class="left">60</td><td class="left">via</td><td class="left"></td></tr><tr><td class="left">61</td><td class="left">www-authenticate</td><td class="left"></td></tr></tbody></table></div><div id="rfc.section.A.p.4"><p><a href="#static.table.entries">Table 1</a> gives the index of each entry in the static table.</p></div></div><div id="huffman.code"><h1 id="rfc.section.B"><a href="#rfc.section.B">B.</a> <a href="#huffman.code">Huffman Code</a></h1><div id="rfc.section.B.p.1"><p>The following Huffman code is used when encoding string literals with a Huffman coding (see <a href="#string.literal.representation" title="String Literal Representation">Section 5.2</a>).</p></div><div id="rfc.section.B.p.2"><p>This Huffman code was generated from statistics obtained on a large sample of HTTP headers. It is a canonical Huffman code (see <a href="#CANONICAL"><cite title="Generating a canonical prefix encoding">[CANONICAL]</cite></a>) with some tweaking to ensure that no symbol has a unique code length.</p></div><div id="rfc.section.B.p.3"><p>Each row in the table defines the code used to represent a symbol: </p><dl><dt>sym:</dt><dd>The symbol to be represented. It is the decimal value of an octet, possibly prepended with its ASCII representation. A specific symbol, "EOS", is used to indicate the end of a string literal.</dd><dt>code as bits:</dt><dd>The Huffman code for the symbol represented as a base-2 integer, aligned on the most significant bit (MSB).</dd><dt>code as hex:</dt><dd>The Huffman code for the symbol, represented as a hexadecimal integer, aligned on the least significant bit (LSB).</dd><dt>len:</dt><dd>The number of bits for the code representing the symbol.</dd></dl></div><div id="rfc.section.B.p.4"><p>As an example, the code for the symbol 47 (corresponding to the ASCII character "/") consists in the 6 bits "0", "1", "1", "0", "0", "0". This corresponds to the value 0x18 (in hexadecimal) encoded in 6 bits.</p></div><div id="rfc.figure.u.3"><pre>
                                                     code
                       code as bits                 as hex   len
     sym              aligned to MSB                aligned   in
                                                    to LSB   bits
    (  0)  |11111111|11000                             1ff8  [13]
    (  1)  |11111111|11111111|1011000                7fffd8  [23]
    (  2)  |11111111|11111111|11111110|0010         fffffe2  [28]
    (  3)  |11111111|11111111|11111110|0011         fffffe3  [28]
    (  4)  |11111111|11111111|11111110|0100         fffffe4  [28]
    (  5)  |11111111|11111111|11111110|0101         fffffe5  [28]
    (  6)  |11111111|11111111|11111110|0110         fffffe6  [28]
    (  7)  |11111111|11111111|11111110|0111         fffffe7  [28]
    (  8)  |11111111|11111111|11111110|1000         fffffe8  [28]
    (  9)  |11111111|11111111|11101010               ffffea  [24]
    ( 10)  |11111111|11111111|11111111|111100      3ffffffc  [30]
    ( 11)  |11111111|11111111|11111110|1001         fffffe9  [28]
    ( 12)  |11111111|11111111|11111110|1010         fffffea  [28]
    ( 13)  |11111111|11111111|11111111|111101      3ffffffd  [30]
    ( 14)  |11111111|11111111|11111110|1011         fffffeb  [28]
    ( 15)  |11111111|11111111|11111110|1100         fffffec  [28]
    ( 16)  |11111111|11111111|11111110|1101         fffffed  [28]
    ( 17)  |11111111|11111111|11111110|1110         fffffee  [28]
    ( 18)  |11111111|11111111|11111110|1111         fffffef  [28]
    ( 19)  |11111111|11111111|11111111|0000         ffffff0  [28]
    ( 20)  |11111111|11111111|11111111|0001         ffffff1  [28]
    ( 21)  |11111111|11111111|11111111|0010         ffffff2  [28]
    ( 22)  |11111111|11111111|11111111|111110      3ffffffe  [30]
    ( 23)  |11111111|11111111|11111111|0011         ffffff3  [28]
    ( 24)  |11111111|11111111|11111111|0100         ffffff4  [28]
    ( 25)  |11111111|11111111|11111111|0101         ffffff5  [28]
    ( 26)  |11111111|11111111|11111111|0110         ffffff6  [28]
    ( 27)  |11111111|11111111|11111111|0111         ffffff7  [28]
    ( 28)  |11111111|11111111|11111111|1000         ffffff8  [28]
    ( 29)  |11111111|11111111|11111111|1001         ffffff9  [28]
    ( 30)  |11111111|11111111|11111111|1010         ffffffa  [28]
    ( 31)  |11111111|11111111|11111111|1011         ffffffb  [28]
' ' ( 32)  |010100                                       14  [ 6]
'!' ( 33)  |11111110|00                                 3f8  [10]
'"' ( 34)  |11111110|01                                 3f9  [10]
'#' ( 35)  |11111111|1010                               ffa  [12]
'$' ( 36)  |11111111|11001                             1ff9  [13]
'%' ( 37)  |010101                                       15  [ 6]
'&amp;' ( 38)  |11111000                                     f8  [ 8]
''' ( 39)  |11111111|010                                7fa  [11]
'(' ( 40)  |11111110|10                                 3fa  [10]
')' ( 41)  |11111110|11                                 3fb  [10]
'*' ( 42)  |11111001                                     f9  [ 8]
'+' ( 43)  |11111111|011                                7fb  [11]
',' ( 44)  |11111010                                     fa  [ 8]
'-' ( 45)  |010110                                       16  [ 6]
'.' ( 46)  |010111                                       17  [ 6]
'/' ( 47)  |011000                                       18  [ 6]
'0' ( 48)  |00000                                         0  [ 5]
'1' ( 49)  |00001                                         1  [ 5]
'2' ( 50)  |00010                                         2  [ 5]
'3' ( 51)  |011001                                       19  [ 6]
'4' ( 52)  |011010                                       1a  [ 6]
'5' ( 53)  |011011                                       1b  [ 6]
'6' ( 54)  |011100                                       1c  [ 6]
'7' ( 55)  |011101                                       1d  [ 6]
'8' ( 56)  |011110                                       1e  [ 6]
'9' ( 57)  |011111                                       1f  [ 6]
':' ( 58)  |1011100                                      5c  [ 7]
';' ( 59)  |11111011                                     fb  [ 8]
'&lt;' ( 60)  |11111111|1111100                           7ffc  [15]
'=' ( 61)  |100000                                       20  [ 6]
'&gt;' ( 62)  |11111111|1011                               ffb  [12]
'?' ( 63)  |11111111|00                                 3fc  [10]
'@' ( 64)  |11111111|11010                             1ffa  [13]
'A' ( 65)  |100001                                       21  [ 6]
'B' ( 66)  |1011101                                      5d  [ 7]
'C' ( 67)  |1011110                                      5e  [ 7]
'D' ( 68)  |1011111                                      5f  [ 7]
'E' ( 69)  |1100000                                      60  [ 7]
'F' ( 70)  |1100001                                      61  [ 7]
'G' ( 71)  |1100010                                      62  [ 7]
'H' ( 72)  |1100011                                      63  [ 7]
'I' ( 73)  |1100100                                      64  [ 7]
'J' ( 74)  |1100101                                      65  [ 7]
'K' ( 75)  |1100110                                      66  [ 7]
'L' ( 76)  |1100111                                      67  [ 7]
'M' ( 77)  |1101000                                      68  [ 7]
'N' ( 78)  |1101001                                      69  [ 7]
'O' ( 79)  |1101010                                      6a  [ 7]
'P' ( 80)  |1101011                                      6b  [ 7]
'Q' ( 81)  |1101100                                      6c  [ 7]
'R' ( 82)  |1101101                                      6d  [ 7]
'S' ( 83)  |1101110                                      6e  [ 7]
'T' ( 84)  |1101111                                      6f  [ 7]
'U' ( 85)  |1110000                                      70  [ 7]
'V' ( 86)  |1110001                                      71  [ 7]
'W' ( 87)  |1110010                                      72  [ 7]
'X' ( 88)  |11111100                                     fc  [ 8]
'Y' ( 89)  |1110011                                      73  [ 7]
'Z' ( 90)  |11111101                                     fd  [ 8]
'[' ( 91)  |11111111|11011                             1ffb  [13]
'\' ( 92)  |11111111|11111110|000                     7fff0  [19]
']' ( 93)  |11111111|11100                             1ffc  [13]
'^' ( 94)  |11111111|111100                            3ffc  [14]
'_' ( 95)  |100010                                       22  [ 6]
'`' ( 96)  |11111111|1111101                           7ffd  [15]
'a' ( 97)  |00011                                         3  [ 5]
'b' ( 98)  |100011                                       23  [ 6]
'c' ( 99)  |00100                                         4  [ 5]
'd' (100)  |100100                                       24  [ 6]
'e' (101)  |00101                                         5  [ 5]
'f' (102)  |100101                                       25  [ 6]
'g' (103)  |100110                                       26  [ 6]
'h' (104)  |100111                                       27  [ 6]
'i' (105)  |00110                                         6  [ 5]
'j' (106)  |1110100                                      74  [ 7]
'k' (107)  |1110101                                      75  [ 7]
'l' (108)  |101000                                       28  [ 6]
'm' (109)  |101001                                       29  [ 6]
'n' (110)  |101010                                       2a  [ 6]
'o' (111)  |00111                                         7  [ 5]
'p' (112)  |101011                                       2b  [ 6]
'q' (113)  |1110110                                      76  [ 7]
'r' (114)  |101100                                       2c  [ 6]
's' (115)  |01000                                         8  [ 5]
't' (116)  |01001                                         9  [ 5]
'u' (117)  |101101                                       2d  [ 6]
'v' (118)  |1110111                                      77  [ 7]
'w' (119)  |1111000                                      78  [ 7]
'x' (120)  |1111001                                      79  [ 7]
'y' (121)  |1111010                                      7a  [ 7]
'z' (122)  |1111011                                      7b  [ 7]
'{' (123)  |11111111|1111110                           7ffe  [15]
'|' (124)  |11111111|100                                7fc  [11]
'}' (125)  |11111111|111101                            3ffd  [14]
'~' (126)  |11111111|11101                             1ffd  [13]
    (127)  |11111111|11111111|11111111|1100         ffffffc  [28]
    (128)  |11111111|11111110|0110                    fffe6  [20]
    (129)  |11111111|11111111|010010                 3fffd2  [22]
    (130)  |11111111|11111110|0111                    fffe7  [20]
    (131)  |11111111|11111110|1000                    fffe8  [20]
    (132)  |11111111|11111111|010011                 3fffd3  [22]
    (133)  |11111111|11111111|010100                 3fffd4  [22]
    (134)  |11111111|11111111|010101                 3fffd5  [22]
    (135)  |11111111|11111111|1011001                7fffd9  [23]
    (136)  |11111111|11111111|010110                 3fffd6  [22]
    (137)  |11111111|11111111|1011010                7fffda  [23]
    (138)  |11111111|11111111|1011011                7fffdb  [23]
    (139)  |11111111|11111111|1011100                7fffdc  [23]
    (140)  |11111111|11111111|1011101                7fffdd  [23]
    (141)  |11111111|11111111|1011110                7fffde  [23]
    (142)  |11111111|11111111|11101011               ffffeb  [24]
    (143)  |11111111|11111111|1011111                7fffdf  [23]
    (144)  |11111111|11111111|11101100               ffffec  [24]
    (145)  |11111111|11111111|11101101               ffffed  [24]
    (146)  |11111111|11111111|010111                 3fffd7  [22]
    (147)  |11111111|11111111|1100000                7fffe0  [23]
    (148)  |11111111|11111111|11101110               ffffee  [24]
    (149)  |11111111|11111111|1100001                7fffe1  [23]
    (150)  |11111111|11111111|1100010                7fffe2  [23]
    (151)  |11111111|11111111|1100011                7fffe3  [23]
    (152)  |11111111|11111111|1100100                7fffe4  [23]
    (153)  |11111111|11111110|11100                  1fffdc  [21]
    (154)  |11111111|11111111|011000                 3fffd8  [22]
    (155)  |11111111|11111111|1100101                7fffe5  [23]
    (156)  |11111111|11111111|011001                 3fffd9  [22]
    (157)  |11111111|11111111|1100110                7fffe6  [23]
    (158)  |11111111|11111111|1100111                7fffe7  [23]
    (159)  |11111111|11111111|11101111               ffffef  [24]
    (160)  |11111111|11111111|011010                 3fffda  [22]
    (161)  |11111111|11111110|11101                  1fffdd  [21]
    (162)  |11111111|11111110|1001                    fffe9  [20]
    (163)  |11111111|11111111|011011                 3fffdb  [22]
    (164)  |11111111|11111111|011100                 3fffdc  [22]
    (165)  |11111111|11111111|1101000                7fffe8  [23]
    (166)  |11111111|11111111|1101001                7fffe9  [23]
    (167)  |11111111|11111110|11110                  1fffde  [21]
    (168)  |11111111|11111111|1101010                7fffea  [23]
    (169)  |11111111|11111111|011101                 3fffdd  [22]
    (170)  |11111111|11111111|011110                 3fffde  [22]
    (171)  |11111111|11111111|11110000               fffff0  [24]
    (172)  |11111111|11111110|11111                  1fffdf  [21]
    (173)  |11111111|11111111|011111                 3fffdf  [22]
    (174)  |11111111|11111111|1101011                7fffeb  [23]
    (175)  |11111111|11111111|1101100                7fffec  [23]
    (176)  |11111111|11111111|00000                  1fffe0  [21]
    (177)  |11111111|11111111|00001                  1fffe1  [21]
    (178)  |11111111|11111111|100000                 3fffe0  [22]
    (179)  |11111111|11111111|00010                  1fffe2  [21]
    (180)  |11111111|11111111|1101101                7fffed  [23]
    (181)  |11111111|11111111|100001                 3fffe1  [22]
    (182)  |11111111|11111111|1101110                7fffee  [23]
    (183)  |11111111|11111111|1101111                7fffef  [23]
    (184)  |11111111|11111110|1010                    fffea  [20]
    (185)  |11111111|11111111|100010                 3fffe2  [22]
    (186)  |11111111|11111111|100011                 3fffe3  [22]
    (187)  |11111111|11111111|100100                 3fffe4  [22]
    (188)  |11111111|11111111|1110000                7ffff0  [23]
    (189)  |11111111|11111111|100101                 3fffe5  [22]
    (190)  |11111111|11111111|100110                 3fffe6  [22]
    (191)  |11111111|11111111|1110001                7ffff1  [23]
    (192)  |11111111|11111111|11111000|00           3ffffe0  [26]
    (193)  |11111111|11111111|11111000|01           3ffffe1  [26]
    (194)  |11111111|11111110|1011                    fffeb  [20]
    (195)  |11111111|11111110|001                     7fff1  [19]
    (196)  |11111111|11111111|100111                 3fffe7  [22]
    (197)  |11111111|11111111|1110010                7ffff2  [23]
    (198)  |11111111|11111111|101000                 3fffe8  [22]
    (199)  |11111111|11111111|11110110|0            1ffffec  [25]
    (200)  |11111111|11111111|11111000|10           3ffffe2  [26]
    (201)  |11111111|11111111|11111000|11           3ffffe3  [26]
    (202)  |11111111|11111111|11111001|00           3ffffe4  [26]
    (203)  |11111111|11111111|11111011|110          7ffffde  [27]
    (204)  |11111111|11111111|11111011|111          7ffffdf  [27]
    (205)  |11111111|11111111|11111001|01           3ffffe5  [26]
    (206)  |11111111|11111111|11110001               fffff1  [24]
    (207)  |11111111|11111111|11110110|1            1ffffed  [25]
    (208)  |11111111|11111110|010                     7fff2  [19]
    (209)  |11111111|11111111|00011                  1fffe3  [21]
    (210)  |11111111|11111111|11111001|10           3ffffe6  [26]
    (211)  |11111111|11111111|11111100|000          7ffffe0  [27]
    (212)  |11111111|11111111|11111100|001          7ffffe1  [27]
    (213)  |11111111|11111111|11111001|11           3ffffe7  [26]
    (214)  |11111111|11111111|11111100|010          7ffffe2  [27]
    (215)  |11111111|11111111|11110010               fffff2  [24]
    (216)  |11111111|11111111|00100                  1fffe4  [21]
    (217)  |11111111|11111111|00101                  1fffe5  [21]
    (218)  |11111111|11111111|11111010|00           3ffffe8  [26]
    (219)  |11111111|11111111|11111010|01           3ffffe9  [26]
    (220)  |11111111|11111111|11111111|1101         ffffffd  [28]
    (221)  |11111111|11111111|11111100|011          7ffffe3  [27]
    (222)  |11111111|11111111|11111100|100          7ffffe4  [27]
    (223)  |11111111|11111111|11111100|101          7ffffe5  [27]
    (224)  |11111111|11111110|1100                    fffec  [20]
    (225)  |11111111|11111111|11110011               fffff3  [24]
    (226)  |11111111|11111110|1101                    fffed  [20]
    (227)  |11111111|11111111|00110                  1fffe6  [21]
    (228)  |11111111|11111111|101001                 3fffe9  [22]
    (229)  |11111111|11111111|00111                  1fffe7  [21]
    (230)  |11111111|11111111|01000                  1fffe8  [21]
    (231)  |11111111|11111111|1110011                7ffff3  [23]
    (232)  |11111111|11111111|101010                 3fffea  [22]
    (233)  |11111111|11111111|101011                 3fffeb  [22]
    (234)  |11111111|11111111|11110111|0            1ffffee  [25]
    (235)  |11111111|11111111|11110111|1            1ffffef  [25]
    (236)  |11111111|11111111|11110100               fffff4  [24]
    (237)  |11111111|11111111|11110101               fffff5  [24]
    (238)  |11111111|11111111|11111010|10           3ffffea  [26]
    (239)  |11111111|11111111|1110100                7ffff4  [23]
    (240)  |11111111|11111111|11111010|11           3ffffeb  [26]
    (241)  |11111111|11111111|11111100|110          7ffffe6  [27]
    (242)  |11111111|11111111|11111011|00           3ffffec  [26]
    (243)  |11111111|11111111|11111011|01           3ffffed  [26]
    (244)  |11111111|11111111|11111100|111          7ffffe7  [27]
    (245)  |11111111|11111111|11111101|000          7ffffe8  [27]
    (246)  |11111111|11111111|11111101|001          7ffffe9  [27]
    (247)  |11111111|11111111|11111101|010          7ffffea  [27]
    (248)  |11111111|11111111|11111101|011          7ffffeb  [27]
    (249)  |11111111|11111111|11111111|1110         ffffffe  [28]
    (250)  |11111111|11111111|11111101|100          7ffffec  [27]
    (251)  |11111111|11111111|11111101|101          7ffffed  [27]
    (252)  |11111111|11111111|11111101|110          7ffffee  [27]
    (253)  |11111111|11111111|11111101|111          7ffffef  [27]
    (254)  |11111111|11111111|11111110|000          7fffff0  [27]
    (255)  |11111111|11111111|11111011|10           3ffffee  [26]
EOS (256)  |11111111|11111111|11111111|111111      3fffffff  [30]
</pre></div></div><div id="examples"><h1 id="rfc.section.C"><a href="#rfc.section.C">C.</a> <a href="#examples">Examples</a></h1><div id="rfc.section.C.p.1"><p>A number of examples are worked through here, covering integer encoding, header field representation, and the encoding of whole lists of header fields, for both requests and responses, and with and without Huffman coding.</p></div><div id="integer.representation.examples"><h2 id="rfc.section.C.1"><a href="#rfc.section.C.1">C.1</a> <a href="#integer.representation.examples">Integer Representation Examples</a></h2><div id="rfc.section.C.1.p.1"><p>This section shows the representation of integer values in details (see <a href="#integer.representation" title="Integer Representation">Section 5.1</a>).</p></div><div id="integer.representation.example1"><h3 id="rfc.section.C.1.1"><a href="#rfc.section.C.1.1">C.1.1</a> <a href="#integer.representation.example1">Example 1: Encoding 10 Using a 5-bit Prefix</a></h3><div id="rfc.section.C.1.1.p.1"><p>The value 10 is to be encoded with a 5-bit prefix. </p><ul><li>10 is less than 31 (2^5 - 1) and is represented using the 5-bit prefix.</li></ul></div><div id="rfc.figure.u.4"><pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 0 | 1 | 0 | 1 | 0 |   10 stored on 5 bits
+---+---+---+---+---+---+---+---+
</pre></div></div><div id="integer.representation.example2"><h3 id="rfc.section.C.1.2"><a href="#rfc.section.C.1.2">C.1.2</a> <a href="#integer.representation.example2">Example 2: Encoding 1337 Using a 5-bit Prefix</a></h3><div id="rfc.section.C.1.2.p.1"><p>The value I=1337 is to be encoded with a 5-bit prefix. </p><ul class="empty"><li>1337 is greater than 31 (2^5 - 1).</li><li><ul class="empty"><li>The 5-bit prefix is filled with its max value (31).</li></ul> </li><li>I = 1337 - (2^5 - 1) = 1306.</li><li><ul class="empty"><li>I (1306) is greater than or equal to 128, the while loop body executes:</li><li><ul class="empty"><li>I % 128 == 26</li><li>26 + 128 == 154</li><li>154 is encoded in 8 bits as: 10011010</li><li>I is set to 10 (1306 / 128 == 10)</li><li>I is no longer greater than or equal to 128, the while loop terminates.</li></ul> </li><li>I, now 10, is encoded in 8 bits as: 00001010.</li></ul> </li><li>The process ends.</li></ul></div><div id="rfc.figure.u.5"><pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 1 | 1 | 1 | 1 | 1 |  Prefix = 31, I = 1306
| 1 | 0 | 0 | 1 | 1 | 0 | 1 | 0 |  1306&gt;=128, encode(154), I=1306/128
| 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 |  10&lt;128, encode(10), done
+---+---+---+---+---+---+---+---+
</pre></div></div><div id="integer.representation.example3"><h3 id="rfc.section.C.1.3"><a href="#rfc.section.C.1.3">C.1.3</a> <a href="#integer.representation.example3">Example 3: Encoding 42 Starting at an Octet Boundary</a></h3><div id="rfc.section.C.1.3.p.1"><p>The value 42 is to be encoded starting at an octet-boundary. This implies that a 8-bit prefix is used. </p><ul><li>42 is less than 255 (2^8 - 1) and is represented using the 8-bit prefix.</li></ul></div><div id="rfc.figure.u.6"><pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | 1 | 0 | 1 | 0 |   42 stored on 8 bits
+---+---+---+---+---+---+---+---+
</pre></div></div></div><div id="header.field.representation.examples"><h2 id="rfc.section.C.2"><a href="#rfc.section.C.2">C.2</a> <a href="#header.field.representation.examples">Header Field Representation Examples</a></h2><div id="rfc.section.C.2.p.1"><p>This section shows several independent representation examples.</p></div><div><h3 id="rfc.section.C.2.1"><a href="#rfc.section.C.2.1">C.2.1</a> Literal Header Field with Indexing</h3><div id="rfc.section.C.2.1.p.1"><p>The header field representation uses a literal name and a literal value. The header field is added to the dynamic table.</p></div><div id="rfc.section.C.2.1.p.2"><span id="rfc.figure.u.7"><p>Header list to encode:</p><pre>
custom-key: custom-header</pre></span></div><div id="rfc.section.C.2.1.p.3"><span id="rfc.figure.u.8"><p>Hex dump of encoded data:</p><pre>
400a 6375 7374 6f6d 2d6b 6579 0d63 7573 | @.custom-key.cus
746f 6d2d 6865 6164 6572                | tom-header</pre></span></div><div id="rfc.section.C.2.1.p.4"><span id="rfc.figure.u.9"><p>Decoding process:</p><pre>
40                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0d                                      |   Literal value (len = 13)
6375 7374 6f6d 2d68 6561 6465 72        | custom-header
                                        | -&gt; custom-key: custom-head\
                                        |   er</pre></span></div><div id="rfc.section.C.2.1.p.5"><span id="rfc.figure.u.10"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  55) custom-key: custom-header
      Table size:  55</pre></span></div><div id="rfc.section.C.2.1.p.6"><span id="rfc.figure.u.11"><p>Decoded header list:</p><pre>
custom-key: custom-header</pre></span></div></div><div><h3 id="rfc.section.C.2.2"><a href="#rfc.section.C.2.2">C.2.2</a> Literal Header Field without Indexing</h3><div id="rfc.section.C.2.2.p.1"><p>The header field representation uses an indexed name and a literal value. The header field is not added to the dynamic table.</p></div><div id="rfc.section.C.2.2.p.2"><span id="rfc.figure.u.12"><p>Header list to encode:</p><pre>
:path: /sample/path</pre></span></div><div id="rfc.section.C.2.2.p.3"><span id="rfc.figure.u.13"><p>Hex dump of encoded data:</p><pre>
040c 2f73 616d 706c 652f 7061 7468      | ../sample/path</pre></span></div><div id="rfc.section.C.2.2.p.4"><span id="rfc.figure.u.14"><p>Decoding process:</p><pre>
04                                      | == Literal not indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :path
0c                                      |   Literal value (len = 12)
2f73 616d 706c 652f 7061 7468           | /sample/path
                                        | -&gt; :path: /sample/path</pre></span></div><div id="rfc.section.C.2.2.p.5"><p>Dynamic table (after decoding): empty.</p></div><div id="rfc.section.C.2.2.p.6"><span id="rfc.figure.u.15"><p>Decoded header list:</p><pre>
:path: /sample/path</pre></span></div></div><div><h3 id="rfc.section.C.2.3"><a href="#rfc.section.C.2.3">C.2.3</a> Literal Header Field never Indexed</h3><div id="rfc.section.C.2.3.p.1"><p>The header field representation uses a literal name and a literal value. The header field is not added to the dynamic table, and must use the same representation if re-encoded by an intermediary.</p></div><div id="rfc.section.C.2.3.p.2"><span id="rfc.figure.u.16"><p>Header list to encode:</p><pre>
password: secret</pre></span></div><div id="rfc.section.C.2.3.p.3"><span id="rfc.figure.u.17"><p>Hex dump of encoded data:</p><pre>
1008 7061 7373 776f 7264 0673 6563 7265 | ..password.secre
74                                      | t</pre></span></div><div id="rfc.section.C.2.3.p.4"><span id="rfc.figure.u.18"><p>Decoding process:</p><pre>
10                                      | == Literal never indexed ==
08                                      |   Literal name (len = 8)
7061 7373 776f 7264                     | password
06                                      |   Literal value (len = 6)
7365 6372 6574                          | secret
                                        | -&gt; password: secret</pre></span></div><div id="rfc.section.C.2.3.p.5"><p>Dynamic table (after decoding): empty.</p></div><div id="rfc.section.C.2.3.p.6"><span id="rfc.figure.u.19"><p>Decoded header list:</p><pre>
password: secret</pre></span></div></div><div><h3 id="rfc.section.C.2.4"><a href="#rfc.section.C.2.4">C.2.4</a> Indexed Header Field</h3><div id="rfc.section.C.2.4.p.1"><p>The header field representation uses an indexed header field, from the static table.</p></div><div id="rfc.section.C.2.4.p.2"><span id="rfc.figure.u.20"><p>Header list to encode:</p><pre>
:method: GET</pre></span></div><div id="rfc.section.C.2.4.p.3"><span id="rfc.figure.u.21"><p>Hex dump of encoded data:</p><pre>
82                                      | .</pre></span></div><div id="rfc.section.C.2.4.p.4"><span id="rfc.figure.u.22"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET</pre></span></div><div id="rfc.section.C.2.4.p.5"><p>Dynamic table (after decoding): empty.</p></div><div id="rfc.section.C.2.4.p.6"><span id="rfc.figure.u.23"><p>Decoded header list:</p><pre>
:method: GET</pre></span></div></div></div><div id="request.examples.without.huffman.coding"><h2 id="rfc.section.C.3"><a href="#rfc.section.C.3">C.3</a> <a href="#request.examples.without.huffman.coding">Request Examples without Huffman Coding</a></h2><div id="rfc.section.C.3.p.1"><p>This section shows several consecutive header lists, corresponding to HTTP requests, on the same connection.</p></div><div><h3 id="rfc.section.C.3.1"><a href="#rfc.section.C.3.1">C.3.1</a> First Request</h3><div id="rfc.section.C.3.1.p.1"><span id="rfc.figure.u.24"><p>Header list to encode:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></span></div><div id="rfc.section.C.3.1.p.2"><span id="rfc.figure.u.25"><p>Hex dump of encoded data:</p><pre>
8286 8441 0f77 7777 2e65 7861 6d70 6c65 | ...A.www.example
2e63 6f6d                               | .com</pre></span></div><div id="rfc.section.C.3.1.p.3"><span id="rfc.figure.u.26"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :scheme: http
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :path: /
41                                      | == Literal indexed ==
                                        |   Indexed name (idx = 1)
                                        |     :authority
0f                                      |   Literal value (len = 15)
7777 772e 6578 616d 706c 652e 636f 6d   | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre></span></div><div id="rfc.section.C.3.1.p.4"><span id="rfc.figure.u.27"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  57) :authority: www.example.com
      Table size:  57</pre></span></div><div id="rfc.section.C.3.1.p.5"><span id="rfc.figure.u.28"><p>Decoded header list:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.3.2"><a href="#rfc.section.C.3.2">C.3.2</a> Second Request</h3><div id="rfc.section.C.3.2.p.1"><span id="rfc.figure.u.29"><p>Header list to encode:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre></span></div><div id="rfc.section.C.3.2.p.2"><span id="rfc.figure.u.30"><p>Hex dump of encoded data:</p><pre>
8286 84be 5808 6e6f 2d63 6163 6865      | ....X.no-cache</pre></span></div><div id="rfc.section.C.3.2.p.3"><span id="rfc.figure.u.31"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :scheme: http
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :path: /
be                                      | == Indexed - Add ==
                                        |   idx = 62
                                        | -&gt; :authority: www.example\
                                        |   .com
58                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
08                                      |   Literal value (len = 8)
6e6f 2d63 6163 6865                     | no-cache
                                        | -&gt; cache-control: no-cache</pre></span></div><div id="rfc.section.C.3.2.p.4"><span id="rfc.figure.u.32"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
      Table size: 110</pre></span></div><div id="rfc.section.C.3.2.p.5"><span id="rfc.figure.u.33"><p>Decoded header list:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre></span></div></div><div><h3 id="rfc.section.C.3.3"><a href="#rfc.section.C.3.3">C.3.3</a> Third Request</h3><div id="rfc.section.C.3.3.p.1"><span id="rfc.figure.u.34"><p>Header list to encode:</p><pre>
:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></span></div><div id="rfc.section.C.3.3.p.2"><span id="rfc.figure.u.35"><p>Hex dump of encoded data:</p><pre>
8287 85bf 400a 6375 7374 6f6d 2d6b 6579 | ....@.custom-key
0c63 7573 746f 6d2d 7661 6c75 65        | .custom-value</pre></span></div><div id="rfc.section.C.3.3.p.3"><span id="rfc.figure.u.36"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: https
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :path: /index.html
bf                                      | == Indexed - Add ==
                                        |   idx = 63
                                        | -&gt; :authority: www.example\
                                        |   .com
40                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0c                                      |   Literal value (len = 12)
6375 7374 6f6d 2d76 616c 7565           | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre></span></div><div id="rfc.section.C.3.3.p.4"><span id="rfc.figure.u.37"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  54) custom-key: custom-value
[  2] (s =  53) cache-control: no-cache
[  3] (s =  57) :authority: www.example.com
      Table size: 164</pre></span></div><div id="rfc.section.C.3.3.p.5"><span id="rfc.figure.u.38"><p>Decoded header list:</p><pre>
:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></span></div></div></div><div id="request.examples.with.huffman.coding"><h2 id="rfc.section.C.4"><a href="#rfc.section.C.4">C.4</a> <a href="#request.examples.with.huffman.coding">Request Examples with Huffman Coding</a></h2><div id="rfc.section.C.4.p.1"><p>This section shows the same examples as the previous section, but using Huffman encoding for the literal values.</p></div><div><h3 id="rfc.section.C.4.1"><a href="#rfc.section.C.4.1">C.4.1</a> First Request</h3><div id="rfc.section.C.4.1.p.1"><span id="rfc.figure.u.39"><p>Header list to encode:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></span></div><div id="rfc.section.C.4.1.p.2"><span id="rfc.figure.u.40"><p>Hex dump of encoded data:</p><pre>
8286 8441 8cf1 e3c2 e5f2 3a6b a0ab 90f4 | ...A......:k....
ff                                      | .</pre></span></div><div id="rfc.section.C.4.1.p.3"><span id="rfc.figure.u.41"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :scheme: http
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :path: /
41                                      | == Literal indexed ==
                                        |   Indexed name (idx = 1)
                                        |     :authority
8c                                      |   Literal value (len = 12)
                                        |     Huffman encoded:
f1e3 c2e5 f23a 6ba0 ab90 f4ff           | .....:k.....
                                        |     Decoded:
                                        | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre></span></div><div id="rfc.section.C.4.1.p.4"><span id="rfc.figure.u.42"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  57) :authority: www.example.com
      Table size:  57</pre></span></div><div id="rfc.section.C.4.1.p.5"><span id="rfc.figure.u.43"><p>Decoded header list:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.4.2"><a href="#rfc.section.C.4.2">C.4.2</a> Second Request</h3><div id="rfc.section.C.4.2.p.1"><span id="rfc.figure.u.44"><p>Header list to encode:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre></span></div><div id="rfc.section.C.4.2.p.2"><span id="rfc.figure.u.45"><p>Hex dump of encoded data:</p><pre>
8286 84be 5886 a8eb 1064 9cbf           | ....X....d..</pre></span></div><div id="rfc.section.C.4.2.p.3"><span id="rfc.figure.u.46"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :scheme: http
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :path: /
be                                      | == Indexed - Add ==
                                        |   idx = 62
                                        | -&gt; :authority: www.example\
                                        |   .com
58                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
86                                      |   Literal value (len = 6)
                                        |     Huffman encoded:
a8eb 1064 9cbf                          | ...d..
                                        |     Decoded:
                                        | no-cache
                                        | -&gt; cache-control: no-cache</pre></span></div><div id="rfc.section.C.4.2.p.4"><span id="rfc.figure.u.47"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
      Table size: 110</pre></span></div><div id="rfc.section.C.4.2.p.5"><span id="rfc.figure.u.48"><p>Decoded header list:</p><pre>
:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre></span></div></div><div><h3 id="rfc.section.C.4.3"><a href="#rfc.section.C.4.3">C.4.3</a> Third Request</h3><div id="rfc.section.C.4.3.p.1"><span id="rfc.figure.u.49"><p>Header list to encode:</p><pre>
:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></span></div><div id="rfc.section.C.4.3.p.2"><span id="rfc.figure.u.50"><p>Hex dump of encoded data:</p><pre>
8287 85bf 4088 25a8 49e9 5ba9 7d7f 8925 | ....@.%.I.[.}..%
a849 e95b b8e8 b4bf                     | .I.[....</pre></span></div><div id="rfc.section.C.4.3.p.3"><span id="rfc.figure.u.51"><p>Decoding process:</p><pre>
82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: https
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :path: /index.html
bf                                      | == Indexed - Add ==
                                        |   idx = 63
                                        | -&gt; :authority: www.example\
                                        |   .com
40                                      | == Literal indexed ==
88                                      |   Literal name (len = 8)
                                        |     Huffman encoded:
25a8 49e9 5ba9 7d7f                     | %.I.[.}.
                                        |     Decoded:
                                        | custom-key
89                                      |   Literal value (len = 9)
                                        |     Huffman encoded:
25a8 49e9 5bb8 e8b4 bf                  | %.I.[....
                                        |     Decoded:
                                        | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre></span></div><div id="rfc.section.C.4.3.p.4"><span id="rfc.figure.u.52"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  54) custom-key: custom-value
[  2] (s =  53) cache-control: no-cache
[  3] (s =  57) :authority: www.example.com
      Table size: 164</pre></span></div><div id="rfc.section.C.4.3.p.5"><span id="rfc.figure.u.53"><p>Decoded header list:</p><pre>
:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></span></div></div></div><div id="response.examples.without.huffman.coding"><h2 id="rfc.section.C.5"><a href="#rfc.section.C.5">C.5</a> <a href="#response.examples.without.huffman.coding">Response Examples without Huffman Coding</a></h2><div id="rfc.section.C.5.p.1"><p>This section shows several consecutive header lists, corresponding to HTTP responses, on the same connection. The HTTP/2 setting parameter SETTINGS_HEADER_TABLE_SIZE is set to the value of 256 octets, causing some evictions to occur.</p></div><div><h3 id="rfc.section.C.5.1"><a href="#rfc.section.C.5.1">C.5.1</a> First Response</h3><div id="rfc.section.C.5.1.p.1"><span id="rfc.figure.u.54"><p>Header list to encode:</p><pre>
:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div><div id="rfc.section.C.5.1.p.2"><span id="rfc.figure.u.55"><p>Hex dump of encoded data:</p><pre>
4803 3330 3258 0770 7269 7661 7465 611d | H.302X.privatea.
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 546e 1768 |  20:13:21 GMTn.h
7474 7073 3a2f 2f77 7777 2e65 7861 6d70 | ttps://www.examp
6c65 2e63 6f6d                          | le.com</pre></span></div><div id="rfc.section.C.5.1.p.3"><span id="rfc.figure.u.56"><p>Decoding process:</p><pre>
48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
03                                      |   Literal value (len = 3)
3330 32                                 | 302
                                        | -&gt; :status: 302
58                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
07                                      |   Literal value (len = 7)
7072 6976 6174 65                       | private
                                        | -&gt; cache-control: private
61                                      | == Literal indexed ==
                                        |   Indexed name (idx = 33)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 54        |  20:13:21 GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
6e                                      | == Literal indexed ==
                                        |   Indexed name (idx = 46)
                                        |     location
17                                      |   Literal value (len = 23)
6874 7470 733a 2f2f 7777 772e 6578 616d | https://www.exam
706c 652e 636f 6d                       | ple.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre></span></div><div id="rfc.section.C.5.1.p.4"><span id="rfc.figure.u.57"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre></span></div><div id="rfc.section.C.5.1.p.5"><span id="rfc.figure.u.58"><p>Decoded header list:</p><pre>
:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.5.2"><a href="#rfc.section.C.5.2">C.5.2</a> Second Response</h3><div id="rfc.section.C.5.2.p.1"><p>The (":status", "302") header field is evicted from the dynamic table to free space to allow adding the (":status", "307") header field.</p></div><div id="rfc.section.C.5.2.p.2"><span id="rfc.figure.u.59"><p>Header list to encode:</p><pre>
:status: 307
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div><div id="rfc.section.C.5.2.p.3"><span id="rfc.figure.u.60"><p>Hex dump of encoded data:</p><pre>
4803 3330 37c1 c0bf                     | H.307...</pre></span></div><div id="rfc.section.C.5.2.p.4"><span id="rfc.figure.u.61"><p>Decoding process:</p><pre>
48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
03                                      |   Literal value (len = 3)
3330 37                                 | 307
                                        | - evict: :status: 302
                                        | -&gt; :status: 307
c1                                      | == Indexed - Add ==
                                        |   idx = 65
                                        | -&gt; cache-control: private
c0                                      | == Indexed - Add ==
                                        |   idx = 64
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
bf                                      | == Indexed - Add ==
                                        |   idx = 63
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre></span></div><div id="rfc.section.C.5.2.p.5"><span id="rfc.figure.u.62"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  42) :status: 307
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre></span></div><div id="rfc.section.C.5.2.p.6"><span id="rfc.figure.u.63"><p>Decoded header list:</p><pre>
:status: 307
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.5.3"><a href="#rfc.section.C.5.3">C.5.3</a> Third Response</h3><div id="rfc.section.C.5.3.p.1"><p>Several header fields are evicted from the dynamic table during the processing of this header list.</p></div><div id="rfc.section.C.5.3.p.2"><span id="rfc.figure.u.64"><p>Header list to encode:</p><pre>
:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></span></div><div id="rfc.section.C.5.3.p.3"><span id="rfc.figure.u.65"><p>Hex dump of encoded data:</p><pre>
88c1 611d 4d6f 6e2c 2032 3120 4f63 7420 | ..a.Mon, 21 Oct
3230 3133 2032 303a 3133 3a32 3220 474d | 2013 20:13:22 GM
54c0 5a04 677a 6970 7738 666f 6f3d 4153 | T.Z.gzipw8foo=AS
444a 4b48 514b 425a 584f 5157 454f 5049 | DJKHQKBZXOQWEOPI
5541 5851 5745 4f49 553b 206d 6178 2d61 | UAXQWEOIU; max-a
6765 3d33 3630 303b 2076 6572 7369 6f6e | ge=3600; version
3d31                                    | =1</pre></span></div><div id="rfc.section.C.5.3.p.4"><span id="rfc.figure.u.66"><p>Decoding process:</p><pre>
88                                      | == Indexed - Add ==
                                        |   idx = 8
                                        | -&gt; :status: 200
c1                                      | == Indexed - Add ==
                                        |   idx = 65
                                        | -&gt; cache-control: private
61                                      | == Literal indexed ==
                                        |   Indexed name (idx = 33)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3220 474d 54        |  20:13:22 GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
c0                                      | == Indexed - Add ==
                                        |   idx = 64
                                        | -&gt; location: https://www.e\
                                        |   xample.com
5a                                      | == Literal indexed ==
                                        |   Indexed name (idx = 26)
                                        |     content-encoding
04                                      |   Literal value (len = 4)
677a 6970                               | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
77                                      | == Literal indexed ==
                                        |   Indexed name (idx = 55)
                                        |     set-cookie
38                                      |   Literal value (len = 56)
666f 6f3d 4153 444a 4b48 514b 425a 584f | foo=ASDJKHQKBZXO
5157 454f 5049 5541 5851 5745 4f49 553b | QWEOPIUAXQWEOIU;
206d 6178 2d61 6765 3d33 3630 303b 2076 |  max-age=3600; v
6572 7369 6f6e 3d31                     | ersion=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 307
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre></span></div><div id="rfc.section.C.5.3.p.5"><span id="rfc.figure.u.67"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre></span></div><div id="rfc.section.C.5.3.p.6"><span id="rfc.figure.u.68"><p>Decoded header list:</p><pre>
:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></span></div></div></div><div id="response.examples.with.huffman.coding"><h2 id="rfc.section.C.6"><a href="#rfc.section.C.6">C.6</a> <a href="#response.examples.with.huffman.coding">Response Examples with Huffman Coding</a></h2><div id="rfc.section.C.6.p.1"><p>This section shows the same examples as the previous section, but using Huffman encoding for the literal values. The HTTP/2 setting parameter SETTINGS_HEADER_TABLE_SIZE is set to the value of 256 octets, causing some evictions to occur. The eviction mechanism uses the length of the decoded literal values, so the same evictions occurs as in the previous section.</p></div><div><h3 id="rfc.section.C.6.1"><a href="#rfc.section.C.6.1">C.6.1</a> First Response</h3><div id="rfc.section.C.6.1.p.1"><span id="rfc.figure.u.69"><p>Header list to encode:</p><pre>
:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div><div id="rfc.section.C.6.1.p.2"><span id="rfc.figure.u.70"><p>Hex dump of encoded data:</p><pre>
4882 6402 5885 aec3 771a 4b61 96d0 7abe | H.d.X...w.Ka..z.
9410 54d4 44a8 2005 9504 0b81 66e0 82a6 | ..T.D. .....f...
2d1b ff6e 919d 29ad 1718 63c7 8f0b 97c8 | -..n..)...c.....
e9ae 82ae 43d3                          | ....C.</pre></span></div><div id="rfc.section.C.6.1.p.3"><span id="rfc.figure.u.71"><p>Decoding process:</p><pre>
48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
82                                      |   Literal value (len = 2)
                                        |     Huffman encoded:
6402                                    | d.
                                        |     Decoded:
                                        | 302
                                        | -&gt; :status: 302
58                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
85                                      |   Literal value (len = 5)
                                        |     Huffman encoded:
aec3 771a 4b                            | ..w.K
                                        |     Decoded:
                                        | private
                                        | -&gt; cache-control: private
61                                      | == Literal indexed ==
                                        |   Indexed name (idx = 33)
                                        |     date
96                                      |   Literal value (len = 22)
                                        |     Huffman encoded:
d07a be94 1054 d444 a820 0595 040b 8166 | .z...T.D. .....f
e082 a62d 1bff                          | ...-..
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:21 \
                                        | GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
6e                                      | == Literal indexed ==
                                        |   Indexed name (idx = 46)
                                        |     location
91                                      |   Literal value (len = 17)
                                        |     Huffman encoded:
9d29 ad17 1863 c78f 0b97 c8e9 ae82 ae43 | .)...c.........C
d3                                      | .
                                        |     Decoded:
                                        | https://www.example.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre></span></div><div id="rfc.section.C.6.1.p.4"><span id="rfc.figure.u.72"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre></span></div><div id="rfc.section.C.6.1.p.5"><span id="rfc.figure.u.73"><p>Decoded header list:</p><pre>
:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.6.2"><a href="#rfc.section.C.6.2">C.6.2</a> Second Response</h3><div id="rfc.section.C.6.2.p.1"><p>The (":status", "302") header field is evicted from the dynamic table to free space to allow adding the (":status", "307") header field.</p></div><div id="rfc.section.C.6.2.p.2"><span id="rfc.figure.u.74"><p>Header list to encode:</p><pre>
:status: 307
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div><div id="rfc.section.C.6.2.p.3"><span id="rfc.figure.u.75"><p>Hex dump of encoded data:</p><pre>
4883 640e ffc1 c0bf                     | H.d.....</pre></span></div><div id="rfc.section.C.6.2.p.4"><span id="rfc.figure.u.76"><p>Decoding process:</p><pre>
48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
83                                      |   Literal value (len = 3)
                                        |     Huffman encoded:
640e ff                                 | d..
                                        |     Decoded:
                                        | 307
                                        | - evict: :status: 302
                                        | -&gt; :status: 307
c1                                      | == Indexed - Add ==
                                        |   idx = 65
                                        | -&gt; cache-control: private
c0                                      | == Indexed - Add ==
                                        |   idx = 64
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
bf                                      | == Indexed - Add ==
                                        |   idx = 63
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre></span></div><div id="rfc.section.C.6.2.p.5"><span id="rfc.figure.u.77"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  42) :status: 307
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre></span></div><div id="rfc.section.C.6.2.p.6"><span id="rfc.figure.u.78"><p>Decoded header list:</p><pre>
:status: 307
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></span></div></div><div><h3 id="rfc.section.C.6.3"><a href="#rfc.section.C.6.3">C.6.3</a> Third Response</h3><div id="rfc.section.C.6.3.p.1"><p>Several header fields are evicted from the dynamic table during the processing of this header list.</p></div><div id="rfc.section.C.6.3.p.2"><span id="rfc.figure.u.79"><p>Header list to encode:</p><pre>
:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></span></div><div id="rfc.section.C.6.3.p.3"><span id="rfc.figure.u.80"><p>Hex dump of encoded data:</p><pre>
88c1 6196 d07a be94 1054 d444 a820 0595 | ..a..z...T.D. ..
040b 8166 e084 a62d 1bff c05a 839b d9ab | ...f...-...Z....
77ad 94e7 821d d7f2 e6c7 b335 dfdf cd5b | w..........5...[
3960 d5af 2708 7f36 72c1 ab27 0fb5 291f | 9`..'..6r..'..).
9587 3160 65c0 03ed 4ee5 b106 3d50 07   | ..1`e...N...=P.</pre></span></div><div id="rfc.section.C.6.3.p.4"><span id="rfc.figure.u.81"><p>Decoding process:</p><pre>
88                                      | == Indexed - Add ==
                                        |   idx = 8
                                        | -&gt; :status: 200
c1                                      | == Indexed - Add ==
                                        |   idx = 65
                                        | -&gt; cache-control: private
61                                      | == Literal indexed ==
                                        |   Indexed name (idx = 33)
                                        |     date
96                                      |   Literal value (len = 22)
                                        |     Huffman encoded:
d07a be94 1054 d444 a820 0595 040b 8166 | .z...T.D. .....f
e084 a62d 1bff                          | ...-..
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:22 \
                                        | GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
c0                                      | == Indexed - Add ==
                                        |   idx = 64
                                        | -&gt; location: https://www.e\
                                        |   xample.com
5a                                      | == Literal indexed ==
                                        |   Indexed name (idx = 26)
                                        |     content-encoding
83                                      |   Literal value (len = 3)
                                        |     Huffman encoded:
9bd9 ab                                 | ...
                                        |     Decoded:
                                        | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
77                                      | == Literal indexed ==
                                        |   Indexed name (idx = 55)
                                        |     set-cookie
ad                                      |   Literal value (len = 45)
                                        |     Huffman encoded:
94e7 821d d7f2 e6c7 b335 dfdf cd5b 3960 | .........5...[9`
d5af 2708 7f36 72c1 ab27 0fb5 291f 9587 | ..'..6r..'..)...
3160 65c0 03ed 4ee5 b106 3d50 07        | 1`e...N...=P.
                                        |     Decoded:
                                        | foo=ASDJKHQKBZXOQWEOPIUAXQ\
                                        | WEOIU; max-age=3600; versi\
                                        | on=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 307
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre></span></div><div id="rfc.section.C.6.3.p.5"><span id="rfc.figure.u.82"><p>Dynamic Table (after decoding):</p><pre>
[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre></span></div><div id="rfc.section.C.6.3.p.6"><span id="rfc.figure.u.83"><p>Decoded header list:</p><pre>
:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></span></div></div></div></div><div class="avoidbreak"><h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1><p><b>Roberto Peon</b><br>Google, Inc<br>Email: fenix@google.com</p><p><b>Hervé Ruellan</b><br>Canon CRF<br>Email: herve.ruellan@crf.canon.fr</p></div></body></html>
